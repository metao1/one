function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var o=[],n=!0,c=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(n=(a=r.next()).done)&&(o.push(a.value),!e||o.length!==e);n=!0);}catch(s){c=!0,i=s}finally{try{n||null==r.return||r.return()}finally{if(c)throw i}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{g5za:function(t,e,o){"use strict";o.r(e);var n=o("tyNb"),c=o("212X"),i=o("0BIi"),a=o("NuY5"),r=o("2Vo4"),s=o("XNiG"),d=o("0Zs5"),l=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.title=e.title,this.notes=e.notes,this.startDate=e.startDate,this.dueDate=e.dueDate,this.completed=e.completed,this.starred=e.starred,this.important=e.important,this.deleted=e.deleted,this.tags=e.tags||[]}return _createClass(t,[{key:"toggleStar",value:function(){this.starred=!this.starred}},{key:"toggleImportant",value:function(){this.important=!this.important}},{key:"toggleCompleted",value:function(){this.completed=!this.completed}},{key:"toggleDeleted",value:function(){this.deleted=!this.deleted}}]),t}(),u=o("dkQB"),g=o("fXoL"),b=o("tk/3");o("ReVU"),o("jPyf");var f=o("ELM3");o("7RnV"),o("sYmb"),o("jhN1");var h=o("ofXK");o("y72V"),o("1kSV"),o("nJlW"),o("tAZD");var p,m=((p=function(){function t(e,o,n){_classCallCheck(this,t),this._httpClient=e,this.accountService=o,this._location=n,this.selectedTodos=[],this.searchText="",this.onUpdateAll=new r.a([]),this.onTodosChanged=new r.a([]),this.onSelectedTodosChanged=new r.a([]),this.onCurrentTodoChanged=new r.a([]),this.onFiltersChanged=new r.a([]),this.onTaskTagsChanged=new r.a([]),this.onAllTagsChanged=new r.a([]),this.onSearchTextChanged=new r.a(""),this.onNewTodoClicked=new s.a,this.onUserChanged=new r.a([])}return _createClass(t,[{key:"resolve",value:function(t,e){var o=this;return this.routeParams=t.params,new Promise((function(t,e){Promise.all([o.getCurrentAccount()]).then((function(){Promise.all([o.getFilters(),o.getTags(),o.getTodos()]).then((function(){o.setCurrentTodo(o.routeParams.todoId?o.routeParams.todoId:null),o.onUpdateAll.subscribe((function(t){o.getTodos()})),o.onSearchTextChanged.subscribe((function(t){o.searchText=t,o.getTodos()})),t()})),t()}),e)}))}},{key:"getCurrentAccount",value:function(){var t=this;return new Promise((function(e,o){t.accountService.identity().then((function(e){t.currentAccount=e,console.log("saving account"),t.onUserChanged.next(e)})),e()}))}},{key:"getFilters",value:function(){var t=this;return new Promise((function(e,o){t._httpClient.get(u.a+"/filter").subscribe((function(o){t.filters=o.response,t.onFiltersChanged.next(t.filters),e(t.filters)}),o)}))}},{key:"getTags",value:function(){var t=this;return new Promise((function(e,o){t._httpClient.get(u.a+"/tag").subscribe((function(o){t.allTags=o.response,t.onAllTagsChanged.next(t.allTags),e(t.allTags)}),o)}))}},{key:"getTodos",value:function(){return this.routeParams.tagHandle?this.getTodosByTag(this.routeParams.tagHandle):this.routeParams.filterHandle?this.getTodosByFilter(this.routeParams.filterHandle):this.getTodosByParams(this.routeParams)}},{key:"getTodosByParams",value:function(t){var e=this;return new Promise((function(t,o){e._httpClient.get(u.a+"/task/"+e.currentAccount.email).subscribe((function(o){e.todos=o.response.map((function(t){return new l(t)})),e.todos=d.a.filterArrayByString(e.todos,e.searchText),e.onTodosChanged.next(e.todos),t(e.todos)}),o)}))}},{key:"getTodosByFilter",value:function(t){var e=this,o=t+"=true";return"dueDate"===t&&(o=t+"=^$|\\s+"),new Promise((function(t,n){e._httpClient.get(u.a+"/task/"+e.currentAccount.email+"?"+o).subscribe((function(o){e.todos=o.response.map((function(t){return new l(t)})),e.todos=d.a.filterArrayByString(e.todos,e.searchText),e.onTodosChanged.next(e.todos),t(e.todos)}),n)}))}},{key:"deleteTask",value:function(){var t=this;return new Promise((function(e,o){t.selectedTodos.map((function(n){t._httpClient.delete(u.a+"/task/"+t.currentAccount.email+"/"+n.id).subscribe((function(t){e(n)}),o)}))}))}},{key:"getTodosByTag",value:function(t){var e=this;return new Promise((function(o,n){e._httpClient.get(u.a+"/task/"+e.currentAccount.email+"?handle="+t).subscribe((function(t){e._httpClient.get(u.a+"/task?taskTags="+t.response[0].id).subscribe((function(t){e.todos=t.response.map((function(t){return new l(t)})),e.todos=d.a.filterArrayByString(e.todos,e.searchText),e.onTodosChanged.next(e.todos),o(e.todos)}),n)}))}))}},{key:"toggleSelectedTodo",value:function(t){if(this.selectedTodos.length>0){var e=!0,o=!1,n=void 0;try{for(var c,i=this.selectedTodos[Symbol.iterator]();!(e=(c=i.next()).done);e=!0){var a=c.value;if(a&&a.id===t){var r=this.selectedTodos.indexOf(a);if(-1!==r)return this.selectedTodos.splice(r,1),void this.onSelectedTodosChanged.next(this.selectedTodos)}}}catch(s){o=!0,n=s}finally{try{e||null==i.return||i.return()}finally{if(o)throw n}}}this.selectedTodos.push(this.todos.find((function(e){return e.id===t}))),this.onSelectedTodosChanged.next(this.selectedTodos)}},{key:"toggleSelectAll",value:function(){this.selectedTodos.length>0?this.deselectTodos():this.selectTodos()}},{key:"selectTodos",value:function(t,e){var o;this.selectedTodos=[],void 0===t||void 0===e?this.selectedTodos=this.todos:(o=this.selectedTodos).push.apply(o,_toConsumableArray(this.todos.filter((function(o){return o[t]===e})))),this.onSelectedTodosChanged.next(this.selectedTodos)}},{key:"deselectTodos",value:function(){this.selectedTodos=[],this.onSelectedTodosChanged.next(this.selectedTodos)}},{key:"setCurrentTodo",value:function(t){this.currentTodo=this.todos.find((function(e){return e.id===t})),this.onCurrentTodoChanged.next([this.currentTodo,"edit"]);var e=this.routeParams.tagHandle,o=this.routeParams.filterHandle;this._location.go(e?"apps/todo/tag/"+e+"/"+t:o?"apps/todo/filter/"+o+"/"+t:"apps/todo/all/"+t)}},{key:"toggleTagOnSelectedTodos",value:function(t){var e=this;this.selectedTodos.map((function(o){e.toggleTagOnTodo(t,o)}))}},{key:"toggleTagOnTodo",value:function(t,e){var o=JSON.stringify(e.tags).includes(JSON.stringify(t));o?e.tags.splice(o,1):e.tags.push(t),this.onTaskTagsChanged.next(e.tags),this.updateTodo(e)}},{key:"hasTag",value:function(t,e){return!!e&&JSON.stringify(e).includes(JSON.stringify(t))}},{key:"updateTodo",value:function(t){var e=this;return console.log("put into:"+JSON.stringify(t)),new Promise((function(o,n){e._httpClient.put(u.a+"/task/"+e.currentAccount.email+"/"+t.id,Object.assign({},t)).subscribe((function(t){e.getTodos().then((function(t){o(t)}),n)}))}))}},{key:"updateStartDate",value:function(t,e){var o=this;return e?(console.log("put into:"+JSON.stringify(t)),new Promise((function(t,e){o._httpClient.put(u.a+"/task/"+o.currentAccount.email+"/"+o.currentTodo.id,Object.assign({},o.currentTodo)).subscribe((function(n){o.getTodos().then((function(e){t(e)}),e)}))}))):null}},{key:"saveTodo",value:function(t){var e=this;return new Promise((function(o,n){e._httpClient.post(u.a+"/task/"+e.currentAccount.email,Object.assign({},t)).subscribe((function(t){e.getTodos().then((function(t){o(t)}),n)}))}))}}]),t}()).\u0275fac=function(t){return new(t||p)(g.kc(b.c),g.kc(f.a),g.kc(h.o))},p.\u0275prov=g.Sb({token:p,factory:p.\u0275fac}),p),v=o("3Pt+"),x=o("1G5W"),_=o("Kj3r"),y=o("/uUt"),C=o("HY3y"),T=o("nS/M"),k=o("5hbv"),O=o("2C/K"),M=o("kcHR"),S=o("XiUz"),P=o("NFeN"),w=o("cpli"),A=o("bTqV"),I=o("FKr1"),H=o("znSr");function F(t,e){if(1&t&&(g.cc(0,"mat-icon",10),g.ad(1),g.bc()),2&t){var o=g.sc().$implicit;g.Hb(1),g.bd(o.icon)}}var z=function(){return["active","mat-accent-bg"]};function D(t,e){if(1&t&&(g.cc(0,"div",8),g.cc(1,"a",9),g.Yc(2,F,2,1,"mat-icon",13),g.cc(3,"span"),g.ad(4),g.bc(),g.bc(),g.bc()),2&t){var o=e.$implicit;g.Hb(1),g.zc("routerLink","/apps/todo/filter/"+o.handle)("routerLinkActive",g.Cc(4,z)),g.Hb(1),g.zc("ngIf",o.icon),g.Hb(2),g.bd(o.title)}}var L=function(t){return{color:t}};function Y(t,e){if(1&t&&(g.cc(0,"div",8),g.cc(1,"a",9),g.cc(2,"mat-icon",14),g.ad(3,"label"),g.bc(),g.cc(4,"span"),g.ad(5),g.bc(),g.bc(),g.bc()),2&t){var o=e.$implicit;g.Hb(1),g.zc("routerLink","/apps/todo/tag/"+o.handle)("routerLinkActive",g.Cc(4,z)),g.Hb(1),g.zc("ngStyle",g.Dc(5,L,o.color)),g.Hb(3),g.bd(o.title)}}var j,W=function(){return{delay:"50ms",scale:"0.2"}},N=function(t){return{value:"*",params:t}},B=function(){return{delay:"100ms",x:"-25px"}},R=function(){return{y:"50px"}},E=((j=function(){function t(e,o,n,c){_classCallCheck(this,t),this.accountService=e,this._todoService=o,this._PersoInfoSidebarService=n,this._router=c,this.accounts={gmail:"me@gmail.com",withinpixels:"me@gmail.com"},this.selectedAccount="gmail",this._unsubscribeAll=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._todoService.onFiltersChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.filters=e})),this._todoService.onAllTagsChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.tags=e}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"newTodo",value:function(){var t=this;this._router.navigate(["/apps/todo/all"]).then((function(){setTimeout((function(){t._todoService.onNewTodoClicked.next(""),t._PersoInfoSidebarService.getSidebar("todo-main-sidebar").close()}))}))}}]),t}()).\u0275fac=function(t){return new(t||j)(g.Wb(f.a),g.Wb(m),g.Wb(T.a),g.Wb(n.f))},j.\u0275cmp=g.Qb({type:j,selectors:[["todo-main-sidebar"]],decls:23,vars:17,consts:[["fxLayout","column","fxLayoutAlign","space-between start",1,"header","mat-accent-bg","p-24","pb-4"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","s-32"],[1,"logo-text"],["persoInfoPerfectScrollbar","",1,"content"],[1,"p-24"],["mat-raised-button","","aria-label","ADD TASK",1,"mat-accent","add-todo-button","w-100-p",3,"click"],[1,"nav"],[1,"nav-item"],["matRipple","",1,"nav-link",3,"routerLink","routerLinkActive"],[1,"nav-link-icon"],[1,"nav-subheader"],["class","nav-item",4,"ngFor","ngForOf"],["class","nav-link-icon",4,"ngIf"],[1,"nav-link-icon",3,"ngStyle"]],template:function(t,e){1&t&&(g.cc(0,"div",0),g.cc(1,"div",1),g.cc(2,"mat-icon",2),g.ad(3," check_box "),g.bc(),g.cc(4,"span",3),g.ad(5,"To-Do"),g.bc(),g.bc(),g.bc(),g.cc(6,"div",4),g.cc(7,"div",5),g.cc(8,"button",6),g.oc("click",(function(){return e.newTodo()})),g.ad(9," ADD TASK "),g.bc(),g.bc(),g.cc(10,"div",7),g.cc(11,"div",8),g.cc(12,"a",9),g.cc(13,"mat-icon",10),g.ad(14,"view_headline"),g.bc(),g.cc(15,"span"),g.ad(16,"All"),g.bc(),g.bc(),g.bc(),g.cc(17,"div",11),g.ad(18,"FILTERS"),g.bc(),g.Yc(19,D,5,5,"div",12),g.cc(20,"div",11),g.ad(21,"TAGS"),g.bc(),g.Yc(22,Y,6,7,"div",12),g.bc(),g.bc()),2&t&&(g.Hb(2),g.zc("@animate",g.Dc(8,N,g.Cc(7,W))),g.Hb(2),g.zc("@animate",g.Dc(11,N,g.Cc(10,B))),g.Hb(2),g.zc("@animate",g.Dc(14,N,g.Cc(13,R))),g.Hb(6),g.zc("routerLink","/apps/todo/all")("routerLinkActive",g.Cc(16,z)),g.Hb(7),g.zc("ngForOf",e.filters),g.Hb(3),g.zc("ngForOf",e.tags))},directives:[S.e,S.d,S.b,P.a,w.a,A.b,n.i,I.r,n.h,h.t,h.u,h.x,H.c],styles:["[_nghost-%COMP%]{display:flex;flex:1 0 auto;flex-direction:column;height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{margin:0 16px 0 0}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:24px;line-height:24px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .account[_ngcontent-%COMP%]{width:100%}"],data:{animation:C.a}}),j),J=o("bSwM"),Q=o("STbY"),U=function(t){return{"background-color":t}};function X(t,e){if(1&t&&(g.cc(0,"div",22),g.Xb(1,"div",23),g.cc(2,"div",24),g.ad(3),g.bc(),g.bc()),2&t){var o=e.$implicit;g.Hb(1),g.zc("ngStyle",g.Dc(2,U,o.color)),g.Hb(2),g.bd(o.handle)}}function V(t,e){1&t&&(g.cc(0,"mat-icon",25),g.ad(1,"error"),g.bc())}function $(t,e){1&t&&(g.cc(0,"mat-icon",16),g.ad(1,"error_outline"),g.bc())}function Z(t,e){1&t&&(g.cc(0,"mat-icon",26),g.ad(1,"star"),g.bc())}function G(t,e){1&t&&(g.cc(0,"mat-icon",16),g.ad(1,"star_outline"),g.bc())}function K(t,e){1&t&&(g.ac(0),g.cc(1,"mat-icon"),g.ad(2,"check_box"),g.bc(),g.cc(3,"span"),g.ad(4,"Mark as undone"),g.bc(),g.Zb())}function q(t,e){1&t&&(g.ac(0),g.cc(1,"mat-icon"),g.ad(2,"check_box_outline_blank"),g.bc(),g.cc(3,"span"),g.ad(4,"Mark as done"),g.bc(),g.Zb())}function tt(t,e){1&t&&(g.ac(0),g.cc(1,"mat-icon"),g.ad(2,"error"),g.bc(),g.cc(3,"span"),g.ad(4,"Remove important"),g.bc(),g.Zb())}function et(t,e){1&t&&(g.ac(0),g.cc(1,"mat-icon"),g.ad(2,"error_outline"),g.bc(),g.cc(3,"span"),g.ad(4,"Mark as important"),g.bc(),g.Zb())}function ot(t,e){1&t&&(g.ac(0),g.cc(1,"mat-icon"),g.ad(2,"star"),g.bc(),g.cc(3,"span"),g.ad(4,"Remove star"),g.bc(),g.Zb())}function nt(t,e){1&t&&(g.ac(0),g.cc(1,"mat-icon"),g.ad(2,"star_outline"),g.bc(),g.cc(3,"span"),g.ad(4,"Add star"),g.bc(),g.Zb())}var ct,it=((ct=function(){function t(e,o){_classCallCheck(this,t),this._todoService=e,this._activatedRoute=o,"all"!==o.snapshot.url[0].path&&(this.moveDisabled=!0),this._unsubscribeAll=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.todo=new l(this.todo),this.completed=this.todo.completed,this.tags=this.todo.tags,this._todoService.onSelectedTodosChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){if(t.selected=!1,e.length>0){var o=!0,n=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(o=(i=a.next()).done);o=!0){var r=i.value;if(r.id===t.todo.id){t.todo=r,t.selected=!0;break}}}catch(s){n=!0,c=s}finally{try{o||null==a.return||a.return()}finally{if(n)throw c}}}})),this._todoService.onTaskTagsChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.tags=e}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"onSelectedChange",value:function(){this._todoService.toggleSelectedTodo(this.todo.id)}},{key:"toggleStar",value:function(t){t.stopPropagation(),this.todo.toggleStar(),this._todoService.updateTodo(this.todo)}},{key:"toggleImportant",value:function(t){t.stopPropagation(),this.todo.toggleImportant(),this._todoService.updateTodo(this.todo)}},{key:"toggleCompleted",value:function(t){t.stopPropagation(),this.todo.toggleCompleted(),this._todoService.updateTodo(this.todo)}}]),t}()).\u0275fac=function(t){return new(t||ct)(g.Wb(m),g.Wb(n.a))},ct.\u0275cmp=g.Qb({type:ct,selectors:[["todo-list-item"]],hostVars:6,hostBindings:function(t,e){2&t&&g.Mb("selected",e.selected)("completed",e.completed)("move-disabled",e.moveDisabled)},inputs:{todo:"todo"},decls:33,vars:15,consts:[["fxLayout","row","fxLayoutAlign","start center"],["ngxDragHandle","","fxFlex","0 1 auto","fxHide.xs","",1,"handle","mr-16"],["fxFlex","0 1 auto",1,"mr-16",3,"ngModel","ngModelChange","click"],["fxLayout","row","fxLayoutAlign","start center","fxFlex",""],["fxFlex","","fxFlexLayout","column",1,"info"],[1,"title"],[1,"notes"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"tags"],["class","tag","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"actions"],["mat-icon-button","","aria-label","Toggle important","fxHide.xs","",3,"click"],["class","red-fg",4,"ngIf"],["class","secondary-text",4,"ngIf"],["mat-icon-button","","aria-label","Toggle star","fxHide.xs","",3,"click"],["class","amber-fg",4,"ngIf"],["mat-icon-button","","aria-label","More","fxHide.xs","",3,"matMenuTriggerFor","click"],[1,"secondary-text"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","toggle done",3,"click"],[4,"ngIf"],["mat-menu-item","","aria-label","toggle important",3,"click"],["mat-menu-item","","aria-label","toggle star",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"tag"],[1,"tag-color",3,"ngStyle"],[1,"tag-label"],[1,"red-fg"],[1,"amber-fg"]],template:function(t,e){if(1&t&&(g.cc(0,"div",0),g.cc(1,"mat-icon",1),g.ad(2," drag_handle "),g.bc(),g.cc(3,"mat-checkbox",2),g.oc("ngModelChange",(function(t){return e.selected=t}))("ngModelChange",(function(){return e.onSelectedChange()}))("click",(function(t){return t.stopPropagation()})),g.bc(),g.cc(4,"div",3),g.cc(5,"div",4),g.cc(6,"div",5),g.ad(7),g.bc(),g.cc(8,"div",6),g.ad(9),g.bc(),g.cc(10,"div",7),g.Yc(11,X,4,4,"div",8),g.bc(),g.bc(),g.cc(12,"div",9),g.cc(13,"button",10),g.oc("click",(function(t){return e.toggleImportant(t)})),g.Yc(14,V,2,0,"mat-icon",11),g.Yc(15,$,2,0,"mat-icon",12),g.bc(),g.cc(16,"button",13),g.oc("click",(function(t){return e.toggleStar(t)})),g.Yc(17,Z,2,0,"mat-icon",14),g.Yc(18,G,2,0,"mat-icon",12),g.bc(),g.cc(19,"button",15),g.oc("click",(function(t){return t.stopPropagation()})),g.cc(20,"mat-icon",16),g.ad(21,"more_vert"),g.bc(),g.bc(),g.cc(22,"mat-menu",null,17),g.cc(24,"button",18),g.oc("click",(function(t){return e.toggleCompleted(t)})),g.Yc(25,K,5,0,"ng-container",19),g.Yc(26,q,5,0,"ng-container",19),g.bc(),g.cc(27,"button",20),g.oc("click",(function(t){return e.toggleImportant(t)})),g.Yc(28,tt,5,0,"ng-container",19),g.Yc(29,et,5,0,"ng-container",19),g.bc(),g.cc(30,"button",21),g.oc("click",(function(t){return e.toggleStar(t)})),g.Yc(31,ot,5,0,"ng-container",19),g.Yc(32,nt,5,0,"ng-container",19),g.bc(),g.bc(),g.bc(),g.bc(),g.bc()),2&t){var o=g.Mc(23);g.Hb(3),g.zc("ngModel",e.selected),g.Hb(4),g.cd(" ",e.todo.title," "),g.Hb(2),g.cd(" ",e.todo.notes," "),g.Hb(2),g.zc("ngForOf",e.todo.tags),g.Hb(3),g.zc("ngIf",e.todo.important),g.Hb(1),g.zc("ngIf",!e.todo.important),g.Hb(2),g.zc("ngIf",e.todo.starred),g.Hb(1),g.zc("ngIf",!e.todo.starred),g.Hb(1),g.zc("matMenuTriggerFor",o),g.Hb(6),g.zc("ngIf",e.todo.completed),g.Hb(1),g.zc("ngIf",!e.todo.completed),g.Hb(2),g.zc("ngIf",e.todo.important),g.Hb(1),g.zc("ngIf",!e.todo.important),g.Hb(2),g.zc("ngIf",e.todo.starred),g.Hb(1),g.zc("ngIf",!e.todo.starred)}},directives:[S.e,S.d,P.a,c.a,S.b,H.b,J.a,v.o,v.r,h.t,A.b,h.u,Q.c,Q.d,Q.a,h.x,H.c],styles:['.todo-list-item{display:block;position:relative;padding:16px 16px 16px 24px;border-bottom:1px solid rgba(0,0,0,.08);text-transform:none;cursor:pointer;flex-shrink:0;background:#fff}.todo-list-item .handle{height:48px;line-height:48px;cursor:move;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.todo-list-item.move-disabled .handle{display:none}.todo-list-item .tags .tag{font-size:11px;border-radius:2px;margin:8px 4px 0 0;padding:3px 8px;background-color:rgba(0,0,0,.08)}.todo-list-item .tags .tag .tag-color{width:8px;height:8px;margin-right:8px;border-radius:50%}.todo-list-item.completed{background:#eee}.todo-list-item.completed .notes,.todo-list-item.completed .title{color:rgba(0,0,0,.54);text-decoration:line-through}.todo-list-item.selected{background:#fff8e1}.todo-list-item .info{margin:0 16px 0 8px}.todo-list-item .info .title{font-size:15px;font-weight:500}.todo-list-item .info .notes{margin-top:4px}.todo-list-item .buttons .is-starred{margin:0 0 0 16px}.todo-list-item .buttons .is-important{margin:0}.todo-list-item.has-handle [ngxdraghandle],.todo-list-item.has-handle [ngxDragHandle],.todo-list-item:not(.has-handle):not(.move-disabled){cursor:move}.todo-list-item .ngx-dnd-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.todo-list-item.gu-mirror{position:fixed!important;margin:0!important;z-index:9999!important;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80);box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.todo-list-item.gu-hide{display:none!important}.todo-list-item.gu-unselectable{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.todo-list-item.gu-transit{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}'],encapsulation:2}),ct);function at(t,e){1&t&&(g.cc(0,"div",3),g.cc(1,"span",4),g.ad(2,"There are no todos!"),g.bc(),g.bc())}var rt=function(t){return{"current-todo mat-accent-50-bg":t}},st=function(){return{y:"100%"}},dt=function(t){return{value:"*",params:t}};function lt(t,e){if(1&t){var o=g.dc();g.cc(0,"todo-list-item",5),g.oc("click",(function(){g.Qc(o);var t=e.$implicit;return g.sc().readTodo(t.id)})),g.bc()}if(2&t){var n=e.$implicit,c=g.sc();g.zc("todo",n)("model",n)("ngClass",g.Dc(4,rt,(null==n?null:n.id)==(null==c.currentTodo?null:c.currentTodo.id)))("@animate",g.Dc(7,dt,g.Cc(6,st)))}}var ut,gt=function(){return{value:"50"}},bt=((ut=function(){function t(e,o,n){_classCallCheck(this,t),this._activatedRoute=e,this._todoService=o,this._location=n,this._unsubscribeAll=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._todoService.onTodosChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.todos=e})),this._todoService.onCurrentTodoChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){if(e)t.currentTodo=e;else{t.currentTodo=null;var o=t._activatedRoute.snapshot.params.tagHandle,n=t._activatedRoute.snapshot.params.filterHandle;t._location.go(o?"apps/todo/tag/"+o:n?"apps/todo/filter/"+n:"apps/todo/all")}}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"readTodo",value:function(t){this._todoService.setCurrentTodo(t)}},{key:"onDrop",value:function(t){}}]),t}()).\u0275fac=function(t){return new(t||ut)(g.Wb(n.a),g.Wb(m),g.Wb(h.o))},ut.\u0275cmp=g.Qb({type:ut,selectors:[["todo-list"]],decls:3,vars:5,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],["ngxDroppable","",1,"todo-list",3,"model","out"],["class","todo-list-item has-handle","ngxDraggable","","matRipple","",3,"todo","model","ngClass","click",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-todos-text","hint-text"],["ngxDraggable","","matRipple","",1,"todo-list-item","has-handle",3,"todo","model","ngClass","click"]],template:function(t,e){1&t&&(g.Yc(0,at,3,0,"div",0),g.cc(1,"div",1),g.oc("out",(function(t){return e.onDrop(t)})),g.Yc(2,lt,1,9,"todo-list-item",2),g.bc()),2&t&&(g.zc("ngIf",0===e.todos.length),g.Hb(1),g.zc("model",e.todos)("@animateStagger",g.Cc(4,gt)),g.Hb(1),g.zc("ngForOf",e.todos))},directives:[h.u,c.c,h.t,S.e,S.d,S.f,it,c.b,I.r,h.r,H.a],styles:["[_nghost-%COMP%]{display:flex;flex:1 0 auto;flex-direction:column;position:relative;padding:0;border-right:1px solid rgba(0,0,0,.12);overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]   .no-todos-text[_ngcontent-%COMP%]{font-size:24px;font-weight:300}"],data:{animation:C.a}}),ut),ft=o("wd/R"),ht=o("kmnG"),pt=o("qFsG"),mt=o("lYqL"),vt=o("6dIM"),xt=["titleInput"],_t=["hiddenText"],yt=function(){return{delay:"300ms",scale:"0.2"}},Ct=function(t){return{value:"*",params:t}},Tt=function(){return{delay:"400ms"}};function kt(t,e){1&t&&(g.cc(0,"div",2),g.cc(1,"mat-icon",3),g.ad(2,"check_box "),g.bc(),g.cc(3,"span",4),g.ad(4," Select a todo "),g.bc(),g.bc()),2&t&&(g.Hb(1),g.zc("@animate",g.Dc(3,Ct,g.Cc(2,yt))),g.Hb(2),g.zc("@animate",g.Dc(6,Ct,g.Cc(5,Tt))))}function Ot(t,e){1&t&&(g.cc(0,"mat-icon"),g.ad(1,"check_box"),g.bc())}function Mt(t,e){1&t&&(g.cc(0,"mat-icon"),g.ad(1,"check_box_outline_blank"),g.bc())}function St(t,e){1&t&&(g.cc(0,"mat-icon",35),g.ad(1,"error"),g.bc())}function Pt(t,e){1&t&&(g.cc(0,"mat-icon",15),g.ad(1,"error_outline"),g.bc())}function wt(t,e){1&t&&(g.cc(0,"mat-icon",36),g.ad(1,"star"),g.bc())}function At(t,e){1&t&&(g.cc(0,"mat-icon",15),g.ad(1,"star_outline"),g.bc())}function It(t,e){1&t&&(g.cc(0,"mat-icon"),g.ad(1,"check"),g.bc())}function Ht(t,e){1&t&&g.Xb(0,"mat-icon")}function Ft(t,e){if(1&t){var o=g.dc();g.cc(0,"button",37),g.oc("click",(function(){g.Qc(o);var t=e.$implicit;return g.sc(2).toggleTagOnTodo(t)})),g.Yc(1,It,2,0,"mat-icon",1),g.Yc(2,Ht,1,0,"mat-icon",1),g.cc(3,"span"),g.ad(4),g.bc(),g.bc()}if(2&t){var n=e.$implicit,c=g.sc(2);g.Hb(1),g.zc("ngIf",c.hasTag(n)),g.Hb(1),g.zc("ngIf",!c.hasTag(n)),g.Hb(2),g.bd(n.title)}}function zt(t,e){1&t&&(g.cc(0,"mat-icon",15),g.ad(1,"delete_forever"),g.bc())}function Dt(t,e){1&t&&(g.cc(0,"mat-icon",15),g.ad(1,"delete"),g.bc())}var Lt=function(t){return{"background-color":t}};function Yt(t,e){if(1&t&&(g.cc(0,"div",38),g.Xb(1,"div",39),g.tc(2,"getById"),g.cc(3,"div",40),g.ad(4),g.tc(5,"getById"),g.bc(),g.bc()),2&t){var o=e.$implicit,n=g.sc(2);g.Hb(1),g.zc("ngStyle",g.Dc(10,Lt,g.wc(2,2,n.tags,o.id,"color"))),g.Hb(3),g.bd(g.wc(5,6,n.tags,o.id,"title"))}}function jt(t,e){if(1&t&&(g.cc(0,"button",41),g.ad(1,"SAVE "),g.bc()),2&t){var o=g.sc(2);g.zc("disabled",o.createdForm.invalid)}}function Wt(t,e){if(1&t){var o=g.dc();g.cc(0,"div"),g.cc(1,"div",5),g.cc(2,"button",6),g.oc("click",(function(t){return g.Qc(o),g.sc().toggleCompleted(t)})),g.Yc(3,Ot,2,0,"mat-icon",1),g.Yc(4,Mt,2,0,"mat-icon",1),g.cc(5,"span",7),g.ad(6,"Mark as Done"),g.bc(),g.bc(),g.cc(7,"div",8),g.cc(8,"button",9),g.oc("click",(function(t){return g.Qc(o),g.sc().toggleImportant(t)})),g.Yc(9,St,2,0,"mat-icon",10),g.Yc(10,Pt,2,0,"mat-icon",11),g.bc(),g.cc(11,"button",12),g.oc("click",(function(t){return g.Qc(o),g.sc().toggleStar(t)})),g.Yc(12,wt,2,0,"mat-icon",13),g.Yc(13,At,2,0,"mat-icon",11),g.bc(),g.cc(14,"button",14),g.cc(15,"mat-icon",15),g.ad(16,"label"),g.bc(),g.bc(),g.cc(17,"mat-menu",null,16),g.Yc(19,Ft,5,3,"button",17),g.bc(),g.cc(20,"button",18),g.oc("click",(function(t){return g.Qc(o),g.sc().toggleDeleted(t)})),g.Yc(21,zt,2,0,"mat-icon",11),g.Yc(22,Dt,2,0,"mat-icon",11),g.bc(),g.bc(),g.bc(),g.cc(23,"div",19),g.cc(24,"form",20),g.oc("submit",(function(){return g.Qc(o),g.sc().addTodo()})),g.cc(25,"mat-form-field",21),g.cc(26,"textarea",22,23),g.ad(28,"                "),g.bc(),g.bc(),g.cc(29,"div",24),g.Yc(30,Yt,6,12,"div",25),g.bc(),g.cc(31,"div",26),g.cc(32,"div",27),g.cc(33,"app-input-date",28),g.oc("datechange",(function(t){return g.Qc(o),g.sc().datechanged("startDate",t)})),g.bc(),g.bc(),g.cc(34,"div",27),g.cc(35,"app-input-date",29),g.oc("datechange",(function(t){return g.Qc(o),g.sc().datechanged("dueDate",t)})),g.bc(),g.bc(),g.bc(),g.cc(36,"mat-form-field",30),g.cc(37,"textarea",31,32),g.oc("keydown",(function(){return g.Qc(o),g.sc().resize()})),g.ad(39,"                "),g.bc(),g.cc(40,"mat-hint",33),g.ad(41),g.bc(),g.bc(),g.Yc(42,jt,2,1,"button",34),g.bc(),g.bc(),g.bc()}if(2&t){var n=g.Mc(18),c=g.Mc(38),i=g.sc();g.Hb(3),g.zc("ngIf",i.todo.completed),g.Hb(1),g.zc("ngIf",!i.todo.completed),g.Hb(5),g.zc("ngIf",i.todo.important),g.Hb(1),g.zc("ngIf",!i.todo.important),g.Hb(2),g.zc("ngIf",i.todo.starred),g.Hb(1),g.zc("ngIf",!i.todo.starred),g.Hb(1),g.zc("matMenuTriggerFor",n),g.Hb(5),g.zc("ngForOf",i.tags),g.Hb(2),g.zc("ngIf",i.todo.deleted),g.Hb(1),g.zc("ngIf",!i.todo.deleted),g.Hb(2),g.zc("formGroup",i.createdForm),g.Hb(6),g.zc("ngForOf",i.todo.tags),g.Hb(3),g.zc("start",i.todo.startDate),g.Hb(2),g.zc("start",i.todo.dueDate),g.Hb(6),g.cd("",c.value.length," / 500"),g.Hb(1),g.zc("ngIf","new"===i.formType)}}var Nt,Bt=((Nt=function(){function t(e,o,n){_classCallCheck(this,t),this._todoService=e,this._formBuilder=o,this._persoInfoAlertService=n,this.maxDate=ft().endOf("day"),this.selectionChanged=new g.o,this.minHeight=64,this.height=this.minHeight,this._unsubscribeAll=new s.a}return _createClass(t,[{key:"datechanged",value:function(t,e){this._todoService.updateTodo("startDate"===t?{id:this.todo.id,title:this.todo.title,notes:this.todo.notes,completed:this.todo.completed,starred:this.todo.starred,startDate:e,dueDate:this.todo.dueDate,important:this.todo.important,deleted:this.todo.deleted,tags:this.todo.tags}:{id:this.todo.id,title:this.todo.title,notes:this.todo.notes,completed:this.todo.completed,starred:this.todo.starred,startDate:this.todo.startDate,dueDate:e,important:this.todo.important,deleted:this.todo.deleted,tags:this.todo.tags})}},{key:"dateOrderValidator",value:function(t){return!0}},{key:"ngOnInit",value:function(){var t=this;this._todoService.onCurrentTodoChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){var o=_slicedToArray(e,2),n=o[0],c=o[1];if(n&&"edit"===c){t.formType="edit",t.todo=n,t.createdForm=t.createTodoForm();var i=ft(t.todo.startDate).toDate();t.createdForm.get("startDate").setValue(i);var a=ft(t.todo.dueDate).toDate();t.createdForm.get("dueDate").setValue(a),t.createdForm.valueChanges.pipe(Object(x.a)(t._unsubscribeAll),Object(_.a)(500),Object(y.a)()).subscribe((function(e){t._todoService.updateTodo(e)}))}})),this._todoService.onTaskTagsChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.todo&&(t.todo.tags=e)})),this._todoService.onAllTagsChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.tags=e})),this._todoService.onNewTodoClicked.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(){t.todo=new l({}),t.todo.id=d.a.generateGUID(),t.formType="new",t.createdForm=t.createTodoForm(),t.focusTitleField(),t._todoService.onCurrentTodoChanged.next([t.todo,"new"])})),this.maxDate=ft().endOf("day")}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"focusTitleField",value:function(){var t=this;setTimeout((function(){t.titleInputField.nativeElement.focus()}))}},{key:"createTodoForm",value:function(){return this._formBuilder.group({id:[this.todo.id],title:[this.todo.title],notes:[this.todo.notes],startDate:[this.todo.startDate],dueDate:[this.todo.dueDate],completed:[this.todo.completed],starred:[this.todo.starred],important:[this.todo.important],deleted:[this.todo.deleted],tags:[this.todo.tags]},[this.dateOrderValidator])}},{key:"toggleStar",value:function(t){t.stopPropagation(),this.todo.toggleStar(),this._todoService.updateTodo(this.todo)}},{key:"toggleImportant",value:function(t){t.stopPropagation(),this.todo.toggleImportant(),this._todoService.updateTodo(this.todo)}},{key:"toggleCompleted",value:function(t){t.stopPropagation(),this.todo.toggleCompleted(),this._todoService.updateTodo(this.todo)}},{key:"toggleDeleted",value:function(t){t.stopPropagation(),this.todo.toggleDeleted(),this._todoService.updateTodo(this.todo)}},{key:"toggleTagOnTodo",value:function(t){this._todoService.toggleTagOnTodo(t,this.todo)}},{key:"hasTag",value:function(t){return this._todoService.hasTag(t,this.todo.tags)}},{key:"resize",value:function(){var t=this;setTimeout((function(){return t.height=Math.max(t.minHeight,t.textEl.nativeElement.offsetHeight)}))}},{key:"addTodo",value:function(){var t=this;this._todoService.saveTodo(this.createdForm.getRawValue()).then((function(e){t._persoInfoAlertService.openSnackBar("Task saved successfully!","CLOSE")})).catch((function(e){console.log(e),t._persoInfoAlertService.openSnackBar("Error! Task not saved!","CLOSE")}))}}]),t}()).\u0275fac=function(t){return new(t||Nt)(g.Wb(m),g.Wb(v.c),g.Wb(k.a))},Nt.\u0275cmp=g.Qb({type:Nt,selectors:[["todo-details"]],viewQuery:function(t,e){var o;1&t&&(g.fd(xt,!0),g.fd(_t,!0)),2&t&&(g.Lc(o=g.pc())&&(e.titleInputField=o.first),g.Lc(o=g.pc())&&(e.textEl=o.first))},outputs:{selectionChanged:"selectionChanged"},decls:2,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlex","",4,"ngIf"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex",""],[1,"s-120","mb-12","select-todo-icon","hint-text"],[1,"hint-text","mat-h1","select-todo-text"],["fxLayout","row","fxLayoutAlign","space-between center",1,"todo-header"],["mat-button","","aria-label","Toggle completed","fxFlex","0 1 auto",1,"toggle-complete-button",3,"click"],[1,"ml-8"],["fxLayout","row","fxLayoutAlign","start center",1,"actions"],["mat-icon-button","","aria-label","Toggle important",3,"click"],["class","red-fg",4,"ngIf"],["class","secondary-text",4,"ngIf"],["mat-icon-button","","aria-label","Toggle star",3,"click"],["class","amber-fg",4,"ngIf"],["mat-icon-button","","fxFlex","0 1 auto",3,"matMenuTriggerFor"],[1,"secondary-text"],["labelMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","aria-label","Toggle delete",3,"click"],[1,"todo-content"],[3,"formGroup","submit"],["floatLabel","never","fxFill","",1,"title","mt-"],["matInput","","name","title","formControlName","title","placeholder","Title","required",""],["titleInput",""],["fxFlexFill","","fxLayout","row wrap",1,"tags","mb-24"],["class","tag","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxFlexFill","","fxLayout","column","fxLayout.gt-xs","row",1,"dates"],["fxFlex","40%"],["placeholder","Start date",3,"start","datechange"],["placeholder","Due Date",3,"start","datechange"],["fxFill","",1,"title","mt-8"],["matInput","","name","notes","formControlName","notes","placeholder","Notes","matTextareaAutosize","","matAutosizeMinRows","1","matAutosizeMaxRows","5","maxlength","500",3,"keydown"],["notes",""],["align","end"],["mat-raised-button","","class","mat-accent",3,"disabled",4,"ngIf"],[1,"red-fg"],[1,"amber-fg"],["mat-menu-item","",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"tag"],[1,"tag-color",3,"ngStyle"],[1,"tag-label"],["mat-raised-button","",1,"mat-accent",3,"disabled"]],template:function(t,e){1&t&&(g.Yc(0,kt,5,8,"div",0),g.Yc(1,Wt,43,16,"div",1)),2&t&&(g.zc("ngIf",!e.todo),g.Hb(1),g.zc("ngIf",e.todo))},directives:[h.u,S.e,S.d,S.b,P.a,A.b,Q.c,Q.d,h.t,v.x,v.p,v.h,ht.b,S.f,pt.b,v.b,v.o,v.f,v.u,mt.a,pt.d,v.k,ht.e,Q.a,h.x,H.c],pipes:[vt.a],styles:["[_nghost-%COMP%]{display:flex;flex:1 0 auto;flex-direction:column;overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]   .todo-header[_ngcontent-%COMP%]{padding:24px;border-bottom:1px solid rgba(0,0,0,.12);background:rgba(0,0,0,.06)}[_nghost-%COMP%]   .todo-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{min-width:88px}[_nghost-%COMP%]   .todo-content[_ngcontent-%COMP%]{padding:24px}[_nghost-%COMP%]   .todo-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:17px;font-weight:500}[_nghost-%COMP%]   .todo-content[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-size:11px;border-radius:2px;margin:8px 4px 0 0;padding:3px 8px;background-color:rgba(0,0,0,.08)}[_nghost-%COMP%]   .todo-content[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]   .tag-color[_ngcontent-%COMP%]{width:8px;height:8px;margin-right:8px;border-radius:50%}[_nghost-%COMP%]   .todo-content[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:auto!important}"],data:{animation:C.a}}),Nt);function Rt(t,e){1&t&&g.Xb(0,"div",24)}function Et(t,e){if(1&t&&(g.cc(0,"button",13),g.cc(1,"mat-icon",25),g.ad(2,"label"),g.bc(),g.bc()),2&t){g.sc();var o=g.Mc(43);g.zc("matMenuTriggerFor",o)}}function Jt(t,e){if(1&t&&(g.cc(0,"button",13),g.cc(1,"mat-icon",25),g.ad(2,"delete"),g.bc(),g.bc()),2&t){g.sc();var o=g.Mc(46);g.zc("matMenuTriggerFor",o)}}function Qt(t,e){if(1&t){var o=g.dc();g.cc(0,"button",15),g.oc("click",(function(){g.Qc(o);var t=e.$implicit;return g.sc().toggleTagOnSelectedTodos(t)})),g.ad(1),g.bc()}if(2&t){var n=e.$implicit;g.Hb(1),g.cd(" ",n.title," ")}}function Ut(t,e){if(1&t){var o=g.dc();g.cc(0,"div",26),g.cc(1,"button",27),g.oc("click",(function(){return g.Qc(o),g.sc().deselectCurrentTodo()})),g.cc(2,"mat-icon",25),g.ad(3,"arrow_back"),g.bc(),g.bc(),g.bc()}}var Xt,Vt=function(t){return{"current-todo-selected":t}},$t=((Xt=function(){function t(e,o,n,c){_classCallCheck(this,t),this._location=e,this._PersoInfoSidebarService=o,this._persoInfoAlertService=n,this._todoService=c,this.searchInput=new v.d(""),this._unsubscribeAll=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._todoService.onSelectedTodosChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){setTimeout((function(){t.hasSelectedTodos=e.length>0,t._todoService.todos&&(t.isIndeterminate=e.length!==t._todoService.todos.length&&e.length>0)}),0)})),this._todoService.onFiltersChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.filters=t._todoService.filters})),this._todoService.onAllTagsChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){t.tags=e})),this.searchInput.valueChanges.pipe(Object(x.a)(this._unsubscribeAll),Object(_.a)(300),Object(y.a)()).subscribe((function(e){t._todoService.onSearchTextChanged.next(e)})),this._todoService.onCurrentTodoChanged.pipe(Object(x.a)(this._unsubscribeAll)).subscribe((function(e){var o=_slicedToArray(e,2),n=o[0];o[1],t.currentTodo=n||null}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"deselectCurrentTodo",value:function(){this._todoService.onCurrentTodoChanged.next([null,null]),this._location.go("apps/todo/all")}},{key:"toggleSelectAll",value:function(){this._todoService.toggleSelectAll()}},{key:"selectTodos",value:function(t,e){this._todoService.selectTodos(t,e)}},{key:"deselectTodos",value:function(){this._todoService.deselectTodos()}},{key:"toggleTagOnSelectedTodos",value:function(t){this._todoService.toggleTagOnSelectedTodos(t)}},{key:"toggleSidebar",value:function(t){this._PersoInfoSidebarService.getSidebar(t).toggleOpen()}},{key:"deleteTask",value:function(){var t=this;Promise.all([this._todoService.deleteTask()]).then((function(e){t._todoService.onUpdateAll.next(e),t.deselectTodos(),t._persoInfoAlertService.openSnackBar("task deleted","Close")}))}}]),t}()).\u0275fac=function(t){return new(t||Xt)(g.Wb(h.o),g.Wb(T.a),g.Wb(k.a),g.Wb(m))},Xt.\u0275cmp=g.Qb({type:Xt,selectors:[["todo"]],decls:53,vars:12,consts:[["id","todo",1,"page-layout","carded","left-sidebar","inner-scroll"],[1,"top-bg","mat-accent-bg"],["name","todo-main-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"center"],["fxLayout","row","fxLayoutAlign","start center",1,"header"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search-wrapper","mat-white-bg"],["mat-icon-button","","fxHide.gt-md","",1,"sidebar-toggle",3,"click"],["flex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["placeholder","Search for a task","fxFlex","",3,"formControl"],[1,"content-card","mat-white-bg",3,"ngClass"],[1,"toolbar","px-24","py-8"],["fxFlex","row","fxLayoutAlign","start center",1,"todo-selection"],[3,"checked","indeterminate","click"],["mat-icon-button","",3,"matMenuTriggerFor"],["selectMenu","matMenu"],["mat-menu-item","",3,"click"],["class","toolbar-separator",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["labelMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["deleteMenu","matMenu"],["fxHide.gt-lg","",4,"ngIf"],["fxFlexAlign","row",1,"content"],["persoInfoPerfectScrollbar","","fxFlex",""],[1,"toolbar-separator"],[1,"secondary-text"],["fxHide.gt-lg",""],["mat-icon-button","",3,"click"]],template:function(t,e){if(1&t&&(g.cc(0,"div",0),g.Xb(1,"div",1),g.cc(2,"persoinfo-sidebar",2),g.Xb(3,"todo-main-sidebar"),g.bc(),g.cc(4,"div",3),g.cc(5,"div",4),g.cc(6,"div",5),g.cc(7,"button",6),g.oc("click",(function(){return e.toggleSidebar("todo-main-sidebar")})),g.cc(8,"mat-icon"),g.ad(9,"menu"),g.bc(),g.bc(),g.cc(10,"div",7),g.cc(11,"mat-icon"),g.ad(12,"search"),g.bc(),g.Xb(13,"input",8),g.bc(),g.bc(),g.bc(),g.cc(14,"div",9),g.cc(15,"div",10),g.cc(16,"div",11),g.cc(17,"mat-checkbox",12),g.oc("click",(function(){return e.toggleSelectAll()})),g.bc(),g.cc(18,"button",13),g.cc(19,"mat-icon"),g.ad(20,"arrow_drop_down"),g.bc(),g.bc(),g.cc(21,"mat-menu",null,14),g.cc(23,"button",15),g.oc("click",(function(){return e.selectTodos()})),g.ad(24,"All"),g.bc(),g.cc(25,"button",15),g.oc("click",(function(){return e.deselectTodos()})),g.ad(26,"None"),g.bc(),g.cc(27,"button",15),g.oc("click",(function(){return e.selectTodos("read",!0)})),g.ad(28,"Read"),g.bc(),g.cc(29,"button",15),g.oc("click",(function(){return e.selectTodos("read",!1)})),g.ad(30,"Unread"),g.bc(),g.cc(31,"button",15),g.oc("click",(function(){return e.selectTodos("starred",!0)})),g.ad(32,"Starred"),g.bc(),g.cc(33,"button",15),g.oc("click",(function(){return e.selectTodos("starred",!1)})),g.ad(34,"Unstarred"),g.bc(),g.cc(35,"button",15),g.oc("click",(function(){return e.selectTodos("important",!0)})),g.ad(36,"Important"),g.bc(),g.cc(37,"button",15),g.oc("click",(function(){return e.selectTodos("important",!1)})),g.ad(38,"Unimportant"),g.bc(),g.bc(),g.Yc(39,Rt,1,0,"div",16),g.Yc(40,Et,3,1,"button",17),g.Yc(41,Jt,3,1,"button",17),g.cc(42,"mat-menu",null,18),g.Yc(44,Qt,2,1,"button",19),g.bc(),g.cc(45,"mat-menu",null,20),g.cc(47,"button",15),g.oc("click",(function(){return e.deleteTask()})),g.ad(48,"delete"),g.bc(),g.bc(),g.bc(),g.Yc(49,Ut,4,0,"div",21),g.bc(),g.cc(50,"div",22),g.Xb(51,"todo-list",23),g.Xb(52,"todo-details",23),g.bc(),g.bc(),g.bc(),g.bc()),2&t){var o=g.Mc(22);g.Hb(13),g.zc("formControl",e.searchInput),g.Hb(1),g.zc("ngClass",g.Dc(10,Vt,e.currentTodo)),g.Hb(3),g.zc("checked",e.hasSelectedTodos)("indeterminate",e.isIndeterminate),g.Hb(1),g.zc("matMenuTriggerFor",o),g.Hb(21),g.zc("ngIf",e.hasSelectedTodos),g.Hb(1),g.zc("ngIf",e.hasSelectedTodos),g.Hb(1),g.zc("ngIf",e.hasSelectedTodos),g.Hb(3),g.zc("ngForOf",e.tags),g.Hb(5),g.zc("ngIf",e.currentTodo)}},directives:[O.a,M.a,E,S.e,S.d,S.b,A.b,H.b,P.a,v.b,v.o,v.e,h.r,H.a,J.a,Q.c,Q.d,Q.a,h.u,h.t,S.a,bt,w.a,Bt],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]{margin:0;width:56px;height:56px;border-radius:0;border-right:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;height:56px;line-height:56px;padding:18px}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:56px;padding-left:16px;color:rgba(0,0,0,.54);border:none;outline:none}@media (max-width:1919px){[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   todo-list[_ngcontent-%COMP%]{border-right:0}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   todo-details[_ngcontent-%COMP%], [_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   todo-list[_ngcontent-%COMP%]{flex:1 0 100%}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   todo-details[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-todo-selected[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{padding-left:16px!important}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-todo-selected[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   todo-list[_ngcontent-%COMP%], [_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-todo-selected[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .todo-selection[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-todo-selected[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   todo-details[_ngcontent-%COMP%]{display:flex!important}}"],data:{animation:C.a}}),Xt),Zt=o("7J14"),Gt=o("dNgK"),Kt=o("iadO"),qt=o("d3UM");o.d(e,"TodoModule",(function(){return oe}));var te,ee=[{path:"all",component:$t,resolve:{todo:m}},{path:"all/:todoId",component:$t,resolve:{todo:m}},{path:"tag/:tagHandle",component:$t,resolve:{todo:m}},{path:"tag/:tagHandle/:todoId",component:$t,resolve:{todo:m}},{path:"filter/:filterHandle",component:$t,resolve:{todo:m}},{path:"filter/:filterHandle/:todoId",component:$t,resolve:{todo:m}},{path:"**",redirectTo:"all"}],oe=((te=function t(){_classCallCheck(this,t)}).\u0275mod=g.Ub({type:te}),te.\u0275inj=g.Tb({factory:function(t){return new(t||te)},providers:[m],imports:[[n.j.forChild(ee),Gt.b,A.c,J.b,Kt.c,ht.d,P.b,pt.c,Q.b,I.s,qt.b,Zt.a,c.d,i.a,a.g]]}),te)},tAZD:function(t,e,o){var n,c,i;!function(a){if("object"==typeof t.exports){var r=a(0,e);void 0!==r&&(t.exports=r)}else c=[o,e],void 0===(i="function"==typeof(n=a)?n.apply(e,c):n)||(t.exports=i)}((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=void 0;e.default=["en",[["a","p"],["AM","PM"],o],[["AM","PM"],o,o],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],o,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],o,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",o,"{1} 'at' {0}",o],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(t){var e=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===o?1:5}]}))}}]);