function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"6dIM":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var c=n("fXoL"),a=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t,e,n){var c=t.find((function(t){return void 0!==t.id&&t.id===e}));if(c)return c[n]}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Vb({name:"getById",type:t,pure:!1}),t}()},NJB7:function(t,e,n){"use strict";n.r(e);var c,a,i=n("tyNb"),o=n("sYmb"),l=n("0BIi"),r=n("NuY5"),s=n("2Vo4"),u=n("0Zs5"),d=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.from=e.from,this.to=e.to,this.subject=e.subject,this.message=e.message,this.time=e.time,this.read=e.read,this.starred=e.starred,this.important=e.important,this.hasAttachments=e.hasAttachments,this.attachments=e.attachments,this.labels=e.labels,this.folder=e.folder}return _createClass(t,[{key:"toggleStar",value:function(){this.starred=!this.starred}},{key:"toggleImportant",value:function(){this.important=!this.important}}]),t}(),b=n("fXoL"),m=n("tk/3"),g=((c=function(){function t(e){_classCallCheck(this,t),this._httpClient=e,this.searchText="",this.selectedMails=[],this.onMailsChanged=new s.a([]),this.onSelectedMailsChanged=new s.a([]),this.onCurrentMailChanged=new s.a([]),this.onFoldersChanged=new s.a([]),this.onFiltersChanged=new s.a([]),this.onLabelsChanged=new s.a([]),this.onSearchTextChanged=new s.a("")}return _createClass(t,[{key:"resolve",value:function(t,e){var n=this;return this.routeParams=t.params,new Promise((function(t,e){Promise.all([n.getFolders(),n.getFilters(),n.getLabels(),n.getMails()]).then((function(){n.setCurrentMail(n.routeParams.mailId?n.routeParams.mailId:null),n.onSearchTextChanged.subscribe((function(t){n.searchText=t,n.getMails()})),t()}),e)}))}},{key:"getFolders",value:function(){var t=this;return new Promise((function(e,n){t._httpClient.get("api/mail-folders").subscribe((function(n){t.folders=n,t.onFoldersChanged.next(t.folders),e(t.folders)}),n)}))}},{key:"getFilters",value:function(){var t=this;return new Promise((function(e,n){t._httpClient.get("api/mail-filters").subscribe((function(n){t.filters=n,t.onFiltersChanged.next(t.filters),e(t.filters)}),n)}))}},{key:"getLabels",value:function(){var t=this;return new Promise((function(e,n){t._httpClient.get("api/mail-labels").subscribe((function(n){t.labels=n,t.onLabelsChanged.next(t.labels),e(t.labels)}),n)}))}},{key:"getMails",value:function(){return this.routeParams.labelHandle?this.getMailsByLabel(this.routeParams.labelHandle):this.routeParams.filterHandle?this.getMailsByFilter(this.routeParams.filterHandle):this.getMailsByFolder(this.routeParams.folderHandle)}},{key:"getMailsByFolder",value:function(t){var e=this;return new Promise((function(n,c){e._httpClient.get("api/mail-folders?handle="+t).subscribe((function(t){e._httpClient.get("api/mail-mails?folder="+t[0].id).subscribe((function(t){e.mails=t.map((function(t){return new d(t)})),e.mails=u.a.filterArrayByString(e.mails,e.searchText),e.onMailsChanged.next(e.mails),n(e.mails)}),c)}))}))}},{key:"getMailsByFilter",value:function(t){var e=this;return new Promise((function(n,c){e._httpClient.get("api/mail-mails?"+t+"=true").subscribe((function(t){e.mails=t.map((function(t){return new d(t)})),e.mails=u.a.filterArrayByString(e.mails,e.searchText),e.onMailsChanged.next(e.mails),n(e.mails)}),c)}))}},{key:"getMailsByLabel",value:function(t){var e=this;return new Promise((function(n,c){e._httpClient.get("api/mail-labels?handle="+t).subscribe((function(t){e._httpClient.get("api/mail-mails?labels="+t[0].id).subscribe((function(t){e.mails=t.map((function(t){return new d(t)})),e.mails=u.a.filterArrayByString(e.mails,e.searchText),e.onMailsChanged.next(e.mails),n(e.mails)}),c)}))}))}},{key:"toggleSelectedMail",value:function(t){if(this.selectedMails.length>0){var e=!0,n=!1,c=void 0;try{for(var a,i=this.selectedMails[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;if(o.id===t){var l=this.selectedMails.indexOf(o);if(-1!==l)return this.selectedMails.splice(l,1),void this.onSelectedMailsChanged.next(this.selectedMails)}}}catch(r){n=!0,c=r}finally{try{e||null==i.return||i.return()}finally{if(n)throw c}}}this.selectedMails.push(this.mails.find((function(e){return e.id===t}))),this.onSelectedMailsChanged.next(this.selectedMails)}},{key:"toggleSelectAll",value:function(){this.selectedMails.length>0?this.deselectMails():this.selectMails()}},{key:"selectMails",value:function(t,e){var n;this.selectedMails=[],void 0===t||void 0===e?this.selectedMails=this.mails:(n=this.selectedMails).push.apply(n,_toConsumableArray(this.mails.filter((function(n){return n[t]===e})))),this.onSelectedMailsChanged.next(this.selectedMails)}},{key:"deselectMails",value:function(){this.selectedMails=[],this.onSelectedMailsChanged.next(this.selectedMails)}},{key:"setCurrentMail",value:function(t){this.currentMail=this.mails.find((function(e){return e.id===t})),this.onCurrentMailChanged.next(this.currentMail)}},{key:"toggleLabelOnSelectedMails",value:function(t){var e=this;this.selectedMails.map((function(n){var c=n.labels.indexOf(t);-1!==c?n.labels.splice(c,1):n.labels.push(t),e.updateMail(n)}))}},{key:"setFolderOnSelectedMails",value:function(t){var e=this;this.selectedMails.map((function(n){n.folder=t,e.updateMail(n)})),this.deselectMails()}},{key:"updateMail",value:function(t){var e=this;return new Promise((function(n,c){e._httpClient.post("api/mail-mails/"+t.id,Object.assign({},t)).subscribe((function(t){e.getMails().then((function(t){t&&e.currentMail&&e.setCurrentMail(e.currentMail.id),n(t)}),c)}))}))}}]),t}()).\u0275fac=function(t){return new(t||c)(b.kc(m.c))},c.\u0275prov=b.Sb({token:c,factory:c.\u0275fac}),c),f=n("3Pt+"),h=n("XNiG"),p=n("1G5W"),M=n("Kj3r"),C=n("/uUt"),_={lang:"en",data:{MAIL:{COMPOSE:"COMPOSE",FOLDERS:"FOLDERS",FILTERS:"FILTERS",LABELS:"LABELS",NO_MESSAGES:"There are no messages!",SELECT_A_MESSAGE_TO_READ:"Select a message to read",SEARCH_PLACEHOLDER:"Search for an e-mail or contact"}}},v={lang:"de",data:{MAIL:{COMPOSE:"KOMPONIEREN",FOLDERS:"Ordner",FILTERS:"FILTER",LABELS:"MARKEN",NO_MESSAGES:"KEINE NACHRICHTEN!",SELECT_A_MESSAGE_TO_READ:"W\xc4HLEN SIE EINE NACHRICHT ZUM LESEN",SEARCH_PLACEHOLDER:"E-SUCHEN PLACEHOLDER"}}},x=n("nS/M"),O=n("mWhh"),P=n("2C/K"),y=n("kcHR"),w=n("HY3y"),S=n("0IaG"),k=n("ELM3"),L=n("/t3+"),A=n("XiUz"),H=n("bTqV"),I=n("NFeN"),F=n("cpli"),z=n("kmnG"),E=n("qFsG"),T=n("znSr"),D=((a=function(){function t(e,n,c){_classCallCheck(this,t),this.accountService=e,this.matDialogRef=n,this._data=c,this.composeForm=this.createComposeForm(),this.showExtraToFields=!1}return _createClass(t,[{key:"createComposeForm",value:function(){return new f.g({from:new f.d({value:"me@gmail.com",disabled:!0}),to:new f.d(""),cc:new f.d(""),bcc:new f.d(""),subject:new f.d(""),message:new f.d("")})}},{key:"toggleExtraToFields",value:function(){this.showExtraToFields=!this.showExtraToFields}}]),t}()).\u0275fac=function(t){return new(t||a)(b.Wb(k.a),b.Wb(S.f),b.Wb(S.a))},a.\u0275cmp=b.Qb({type:a,selectors:[["mail-compose"]],decls:57,vars:6,consts:[[1,"dialog-content-wrapper"],[1,"mat-accent","m-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],[1,"title","dialog-title"],["mat-icon-button","","aria-label","Close dialog",3,"click"],["mat-dialog-content","","persoInfoPerfectScrollbar","",1,"p-24","m-0"],["name","composeForm","fxLayout","column","fxFlex","",1,"compose-form",3,"formGroup"],["matInput","","name","from","placeholder","From","formControlName","from","type","email"],["matInput","","name","to","placeholder","To","formControlName","to","type","email","required",""],[1,"show-hide-extra-fields",3,"click"],[3,"fxShow"],["matInput","","name","cc","placeholder","Cc","formControlName","cc","type","email"],["matInput","","name","bcc","placeholder","Bcc","formControlName","bcc","type","email"],["matInput","","name","subject","placeholder","Subject","formControlName","subject"],["matInput","","name","message","placeholder","Message","formControlName","message","rows","6"],[1,"attachment-list"],["fxLayout","row","fxLayoutAlign","space-between center",1,"attachment"],[1,"filename"],[1,"size"],["mat-icon-button","","aria-label","Delete attachment"],[1,"s-16"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","space-between center",1,"m-0","p-16"],["mat-raised-button","","aria-label","SAVE",1,"save-button","mat-accent",3,"disabled","click"],["mat-icon-button","","matTooltip","Attach a file"],["mat-icon-button","","aria-label","Delete","matTooltip","Delete",3,"click"]],template:function(t,e){1&t&&(b.cc(0,"div",0),b.cc(1,"mat-toolbar",1),b.cc(2,"mat-toolbar-row",2),b.cc(3,"span",3),b.ad(4,"New Message"),b.bc(),b.cc(5,"button",4),b.oc("click",(function(){return e.matDialogRef.close()})),b.cc(6,"mat-icon"),b.ad(7,"close"),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(8,"div",5),b.cc(9,"form",6),b.cc(10,"mat-form-field"),b.Xb(11,"input",7),b.bc(),b.cc(12,"mat-form-field"),b.Xb(13,"input",8),b.bc(),b.cc(14,"div",9),b.oc("click",(function(){return e.toggleExtraToFields()})),b.cc(15,"span",10),b.ad(16,"Show CC & BCC"),b.bc(),b.cc(17,"span",10),b.ad(18,"Hide CC & BCC"),b.bc(),b.bc(),b.cc(19,"mat-form-field",10),b.Xb(20,"input",11),b.bc(),b.cc(21,"mat-form-field",10),b.Xb(22,"input",12),b.bc(),b.cc(23,"mat-form-field"),b.Xb(24,"input",13),b.bc(),b.cc(25,"mat-form-field"),b.cc(26,"textarea",14),b.ad(27,"                "),b.bc(),b.bc(),b.cc(28,"div",15),b.cc(29,"div",16),b.cc(30,"div"),b.cc(31,"span",17),b.ad(32,"attachment-2.doc"),b.bc(),b.cc(33,"span",18),b.ad(34,"(12 Kb)"),b.bc(),b.bc(),b.cc(35,"button",19),b.cc(36,"mat-icon",20),b.ad(37,"close"),b.bc(),b.bc(),b.bc(),b.cc(38,"div",16),b.cc(39,"div"),b.cc(40,"span",17),b.ad(41,"attachment-1.jpg"),b.bc(),b.cc(42,"span",18),b.ad(43,"(350 Kb)"),b.bc(),b.bc(),b.cc(44,"button",19),b.cc(45,"mat-icon",20),b.ad(46,"close"),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(47,"div",21),b.cc(48,"div"),b.cc(49,"button",22),b.oc("click",(function(){return e.matDialogRef.close(["send",e.composeForm])})),b.ad(50," SEND "),b.bc(),b.cc(51,"button",23),b.cc(52,"mat-icon"),b.ad(53,"attach_file"),b.bc(),b.bc(),b.bc(),b.cc(54,"button",24),b.oc("click",(function(){return e.matDialogRef.close(["delete",e.composeForm])})),b.cc(55,"mat-icon"),b.ad(56,"delete"),b.bc(),b.bc(),b.bc(),b.bc()),2&t&&(b.Hb(9),b.zc("formGroup",e.composeForm),b.Hb(6),b.zc("fxShow",!e.showExtraToFields),b.Hb(2),b.zc("fxShow",e.showExtraToFields),b.Hb(2),b.zc("fxShow",e.showExtraToFields),b.Hb(2),b.zc("fxShow",e.showExtraToFields),b.Hb(28),b.zc("disabled",e.composeForm.invalid))},directives:[L.a,L.c,A.b,A.e,A.d,H.b,I.a,S.d,F.a,f.x,f.p,f.h,z.b,E.b,f.b,f.o,f.f,f.u,T.b,S.c],styles:["@media screen and (max-width:599px){.mail-compose-dialog{width:100%}}@media (min-width:600px){.mail-compose-dialog{width:640px}}.mail-compose-dialog .mat-dialog-container{padding:0}.mail-compose-dialog .mat-dialog-container .compose-form .mat-form-field{width:100%}.mail-compose-dialog .mat-dialog-container .compose-form .show-hide-extra-fields{text-align:right;cursor:pointer;font-size:12px}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list{font-size:13px;padding-top:16px}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list .attachment{background-color:rgba(0,0,0,.08);border:1px solid rgba(0,0,0,.16);padding-left:16px;margin-top:8px;border-radius:2px}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list .attachment .filename{font-weight:500}.mail-compose-dialog .mat-dialog-container .compose-form .attachment-list .attachment:last-child{margin-bottom:0}.mail-compose-dialog .dialog-content-wrapper{max-height:85vh;display:flex;flex-direction:column}"],encapsulation:2}),a),R=n("ofXK"),j=n("FKr1");function Y(t,e){if(1&t&&(b.cc(0,"mat-icon",13),b.ad(1),b.bc()),2&t){var n=b.sc().$implicit;b.Hb(1),b.bd(n.icon)}}var N=function(){return["active","mat-accent-bg"]};function B(t,e){if(1&t&&(b.cc(0,"div",10),b.cc(1,"a",11),b.Yc(2,Y,2,1,"mat-icon",12),b.cc(3,"span"),b.ad(4),b.bc(),b.bc(),b.bc()),2&t){var n=e.$implicit;b.Hb(1),b.zc("routerLink","/apps/mail/"+n.handle)("routerLinkActive",b.Cc(4,N)),b.Hb(1),b.zc("ngIf",n.icon),b.Hb(2),b.bd(n.title)}}function X(t,e){if(1&t&&(b.cc(0,"mat-icon",15),b.ad(1),b.bc()),2&t){var n=b.sc().$implicit;b.zc("ngClass",n.color),b.Hb(1),b.bd(n.icon)}}function W(t,e){if(1&t&&(b.cc(0,"div",10),b.cc(1,"a",11),b.Yc(2,X,2,2,"mat-icon",14),b.cc(3,"span"),b.ad(4),b.bc(),b.bc(),b.bc()),2&t){var n=e.$implicit;b.Hb(1),b.zc("routerLink","/apps/mail/filter/"+n.handle)("routerLinkActive",b.Cc(4,N)),b.Hb(1),b.zc("ngIf",n.icon),b.Hb(2),b.bd(n.title)}}var Q=function(t){return{color:t}};function $(t,e){if(1&t&&(b.cc(0,"div",10),b.cc(1,"a",11),b.cc(2,"mat-icon",16),b.ad(3,"label"),b.bc(),b.cc(4,"span"),b.ad(5),b.bc(),b.bc(),b.bc()),2&t){var n=e.$implicit;b.Hb(1),b.zc("routerLink","/apps/mail/label/"+n.handle)("routerLinkActive",b.Cc(4,N)),b.Hb(1),b.zc("ngStyle",b.Dc(5,Q,n.color)),b.Hb(3),b.bd(n.title)}}var G,K,U=function(){return{delay:"50ms",scale:"0.2"}},V=function(t){return{value:"*",params:t}},q=function(){return{delay:"100ms",x:"-25px"}},J=function(){return{y:"50px"}},Z=((G=function(){function t(e,n,c){_classCallCheck(this,t),this.accountService=e,this._mailService=n,this._matDialog=c,this.accounts={gmail:"me@gmail.com",withinpixels:"me@gmail.com"},this.selectedAccount="gmail",this._unsubscribeAll=new h.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._mailService.onFoldersChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.folders=e})),this._mailService.onFiltersChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.filters=e})),this._mailService.onLabelsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.labels=e}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"composeDialog",value:function(){this.dialogRef=this._matDialog.open(D,{panelClass:"mail-compose-dialog"}),this.dialogRef.afterClosed().subscribe((function(t){if(t){var e=t[1];switch(t[0]){case"send":console.log("new Mail",e.getRawValue());break;case"delete":console.log("delete Mail")}}}))}}]),t}()).\u0275fac=function(t){return new(t||G)(b.Wb(k.a),b.Wb(g),b.Wb(S.b))},G.\u0275cmp=b.Qb({type:G,selectors:[["mail-main-sidebar"]],decls:24,vars:27,consts:[["fxLayout","column","fxLayoutAlign","space-between start",1,"header","mat-accent-bg","p-24","pb-4"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","s-32"],[1,"logo-text"],["persoInfoPerfectScrollbar","",1,"content"],[1,"p-24"],["mat-raised-button","","aria-label","Compose",1,"mat-accent","compose-dialog-button","w-100-p",3,"click"],[1,"nav"],[1,"nav-subheader"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],["matRipple","",1,"nav-link",3,"routerLink","routerLinkActive"],["class","nav-link-icon",4,"ngIf"],[1,"nav-link-icon"],["class","nav-link-icon",3,"ngClass",4,"ngIf"],[1,"nav-link-icon",3,"ngClass"],[1,"nav-link-icon",3,"ngStyle"]],template:function(t,e){1&t&&(b.cc(0,"div",0),b.cc(1,"div",1),b.cc(2,"mat-icon",2),b.ad(3,"mail "),b.bc(),b.cc(4,"span",3),b.ad(5,"Mailbox"),b.bc(),b.bc(),b.bc(),b.cc(6,"div",4),b.cc(7,"div",5),b.cc(8,"button",6),b.oc("click",(function(){return e.composeDialog()})),b.ad(9),b.tc(10,"translate"),b.bc(),b.bc(),b.cc(11,"div",7),b.cc(12,"div",8),b.ad(13),b.tc(14,"translate"),b.bc(),b.Yc(15,B,5,5,"div",9),b.cc(16,"div",8),b.ad(17),b.tc(18,"translate"),b.bc(),b.Yc(19,W,5,5,"div",9),b.cc(20,"div",8),b.ad(21),b.tc(22,"translate"),b.bc(),b.Yc(23,$,6,7,"div",9),b.bc(),b.bc()),2&t&&(b.Hb(2),b.zc("@animate",b.Dc(19,V,b.Cc(18,U))),b.Hb(2),b.zc("@animate",b.Dc(22,V,b.Cc(21,q))),b.Hb(2),b.zc("@animate",b.Dc(25,V,b.Cc(24,J))),b.Hb(3),b.cd(" ",b.uc(10,10,"MAIL.COMPOSE")," "),b.Hb(4),b.bd(b.uc(14,12,"MAIL.FOLDERS")),b.Hb(2),b.zc("ngForOf",e.folders),b.Hb(2),b.bd(b.uc(18,14,"MAIL.FILTERS")),b.Hb(2),b.zc("ngForOf",e.filters),b.Hb(2),b.bd(b.uc(22,16,"MAIL.LABELS")),b.Hb(2),b.zc("ngForOf",e.labels))},directives:[A.e,A.d,A.b,I.a,F.a,H.b,R.t,i.i,j.r,i.h,R.u,R.r,T.a,R.x,T.c],pipes:[o.c],styles:["[_nghost-%COMP%]{display:flex;flex:1 0 auto;flex-direction:column;height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{margin:0 16px 0 0}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{font-size:24px;line-height:24px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .account[_ngcontent-%COMP%]{width:100%}"],data:{animation:w.a}}),G),tt=n("bSwM"),et=n("STbY"),nt=((K=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],t?String(t).replace(/<[^>]+>/gm,""):""}}]),t}()).\u0275fac=function(t){return new(t||K)},K.\u0275pipe=b.Vb({name:"htmlToPlaintext",type:K,pure:!0}),K),ct=n("6dIM");function at(t,e){if(1&t&&b.Xb(0,"img",16),2&t){var n=b.sc();b.Ac("alt",null==n.mail.from?null:n.mail.from.name),b.Ac("src",null==n.mail.from?null:n.mail.from.avatar,b.Sc)}}function it(t,e){if(1&t&&(b.cc(0,"div",17),b.ad(1),b.bc()),2&t){var n=b.sc();b.Hb(1),b.bd(null==n.mail.from?null:n.mail.from.name[0])}}function ot(t,e){if(1&t&&(b.cc(0,"span",18),b.ad(1),b.bc()),2&t){var n=b.sc();b.Hb(1),b.bd(null==n.mail.from?null:n.mail.from.name)}}function lt(t,e){1&t&&(b.cc(0,"mat-icon"),b.ad(1,"attachment"),b.bc())}function rt(t,e){if(1&t&&(b.cc(0,"div",19),b.ad(1),b.tc(2,"slice"),b.tc(3,"htmlToPlaintext"),b.bc()),2&t){var n=b.sc();b.Hb(1),b.dd(" ",b.wc(2,2,b.uc(3,6,n.mail.message),0,180),"",n.mail.message.length>180?"...":""," ")}}var st=function(t){return{"background-color":t}};function ut(t,e){if(1&t&&(b.cc(0,"div",20),b.Xb(1,"div",21),b.tc(2,"getById"),b.cc(3,"div",22),b.ad(4),b.tc(5,"getById"),b.bc(),b.bc()),2&t){var n=e.$implicit,c=b.sc();b.Hb(1),b.zc("ngStyle",b.Dc(10,st,b.wc(2,2,c.labels,n,"color"))),b.Hb(3),b.bd(b.wc(5,6,c.labels,n,"title"))}}var dt,bt=((dt=function(){function t(e){_classCallCheck(this,t),this._mailService=e,this._unsubscribeAll=new h.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.mail=new d(this.mail),this._mailService.onSelectedMailsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){if(t.selected=!1,e.length>0){var n=!0,c=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0)if(i.value.id===t.mail.id){t.selected=!0;break}}catch(l){c=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(c)throw a}}}})),this._mailService.onLabelsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.labels=e}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"onSelectedChange",value:function(){this._mailService.toggleSelectedMail(this.mail.id)}},{key:"toggleStar",value:function(t){t.stopPropagation(),this.mail.toggleStar(),this._mailService.updateMail(this.mail)}},{key:"toggleImportant",value:function(t){t.stopPropagation(),this.mail.toggleImportant(),this._mailService.updateMail(this.mail)}}]),t}()).\u0275fac=function(t){return new(t||dt)(b.Wb(g))},dt.\u0275cmp=b.Qb({type:dt,selectors:[["mail-list-item"]],hostVars:2,hostBindings:function(t,e){2&t&&b.Mb("selected",e.selected)},inputs:{mail:"mail"},decls:19,vars:9,consts:[["fxLayout","row","fxLayoutAlign","start center"],[3,"ngModel","ngModelChange","click"],["fxFlex","","FlexLayout","column",1,"info"],["fxLayout","row","fxLayoutAlign","start center",1,"row-1"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","",1,"name"],["class","avatar",3,"alt","src",4,"ngIf"],["class","avatar mat-accent-bg",4,"ngIf"],["class","text-truncate",4,"ngIf"],[4,"ngIf"],[1,"time"],["fxLayout","row","fxLayoutAlign","start center",1,"row-2"],["fxLayout","column","fxLayoutAlign","start start"],[1,"subject","text-truncate"],["class","message text-truncate",4,"ngIf"],["fxLayout","row wrap","fxHide","","fxShow.gt-sm","",1,"labels"],["class","label","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],[1,"avatar",3,"alt","src"],[1,"avatar","mat-accent-bg"],[1,"text-truncate"],[1,"message","text-truncate"],["fxLayout","row","fxLayoutAlign","start center",1,"label"],[1,"label-color",3,"ngStyle"],[1,"label-title"]],template:function(t,e){1&t&&(b.cc(0,"div",0),b.cc(1,"mat-checkbox",1),b.oc("ngModelChange",(function(t){return e.selected=t}))("ngModelChange",(function(){return e.onSelectedChange()}))("click",(function(t){return t.stopPropagation()})),b.bc(),b.cc(2,"div",2),b.cc(3,"div",3),b.cc(4,"div",4),b.Yc(5,at,1,2,"img",5),b.Yc(6,it,2,1,"div",6),b.Yc(7,ot,2,1,"span",7),b.Yc(8,lt,2,0,"mat-icon",8),b.bc(),b.cc(9,"div",0),b.cc(10,"div",9),b.ad(11),b.bc(),b.bc(),b.bc(),b.cc(12,"div",10),b.cc(13,"div",11),b.cc(14,"div",12),b.ad(15),b.bc(),b.Yc(16,rt,4,8,"div",13),b.cc(17,"div",14),b.Yc(18,ut,6,12,"div",15),b.bc(),b.bc(),b.bc(),b.bc(),b.bc()),2&t&&(b.Hb(1),b.zc("ngModel",e.selected),b.Hb(4),b.zc("ngIf",null==e.mail.from?null:e.mail.from.avatar),b.Hb(1),b.zc("ngIf",!(null!=e.mail.from&&e.mail.from.avatar)),b.Hb(1),b.zc("ngIf",null==e.mail?null:e.mail.from),b.Hb(1),b.zc("ngIf",e.mail.hasAttachments),b.Hb(3),b.bd(e.mail.time),b.Hb(4),b.cd(" ",e.mail.subject," "),b.Hb(1),b.zc("ngIf",null==e.mail?null:e.mail.message),b.Hb(2),b.zc("ngForOf",e.mail.labels))},directives:[A.e,A.d,tt.a,f.o,f.r,A.b,R.u,T.b,R.t,I.a,R.x,T.c],pipes:[R.F,nt,ct.a],styles:["[_nghost-%COMP%]{flex-shrink:0;position:relative;padding:16px 24px;border-bottom:1px solid rgba(0,0,0,.12);cursor:pointer}.unread[_nghost-%COMP%]{background:#fff}.unread[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .unread[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-weight:700}.unread[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{background:#fff}.selected[_nghost-%COMP%], .selected[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{background:#fff8e1}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{overflow:hidden;width:0;margin-left:16px;position:relative}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:15px;font-weight:500}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{min-width:32px;width:32px;height:32px;line-height:32px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:4px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:32px;height:32px;line-height:1}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{position:relative;color:rgba(0,0,0,.54)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]{margin-top:8px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:11px;border-radius:2px;margin:0 4px 0 0;padding:3px 8px;background-color:rgba(0,0,0,.08)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .row-2[_ngcontent-%COMP%]   .labels[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .label-color[_ngcontent-%COMP%]{width:8px;height:8px;margin-right:8px;border-radius:50%}"]}),dt);function mt(t,e){1&t&&(b.cc(0,"div",3),b.cc(1,"span",4),b.ad(2),b.tc(3,"translate"),b.bc(),b.bc()),2&t&&(b.Hb(2),b.bd(b.uc(3,1,"MAIL.NO_MESSAGES")))}var gt=function(t){return{"current-mail mat-accent-50-bg":t}},ft=function(){return{y:"100%"}},ht=function(t){return{value:"*",params:t}};function pt(t,e){if(1&t){var n=b.dc();b.cc(0,"mail-list-item",5),b.oc("click",(function(){b.Qc(n);var t=e.$implicit;return b.sc().readMail(t.id)})),b.bc()}if(2&t){var c=e.$implicit,a=b.sc();b.zc("mail",c)("ngClass",b.Dc(3,gt,(null==c?null:c.id)==(null==a.currentMail?null:a.currentMail.id)))("@animate",b.Dc(6,ht,b.Cc(5,ft)))}}var Mt,Ct=function(){return{value:"50"}},_t=((Mt=function(){function t(e,n,c){_classCallCheck(this,t),this._activatedRoute=e,this._mailService=n,this._location=c,this._unsubscribeAll=new h.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._mailService.onMailsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.mails=e})),this._mailService.onCurrentMailChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){if(e)t.currentMail=e;else{t.currentMail=null;var n=t._activatedRoute.snapshot.params.labelHandle,c=t._activatedRoute.snapshot.params.filterHandle,a=t._activatedRoute.snapshot.params.folderHandle;t._location.go(n?"apps/mail/label/"+n:c?"apps/mail/filter/"+c:"apps/mail/"+a)}}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"readMail",value:function(t){var e=this._activatedRoute.snapshot.params.labelHandle,n=this._activatedRoute.snapshot.params.filterHandle;this._location.go(e?"apps/mail/label/"+e+"/"+t:n?"apps/mail/filter/"+n+"/"+t:"apps/mail/"+this._activatedRoute.snapshot.params.folderHandle+"/"+t),this._mailService.setCurrentMail(t)}}]),t}()).\u0275fac=function(t){return new(t||Mt)(b.Wb(i.a),b.Wb(g),b.Wb(R.o))},Mt.\u0275cmp=b.Qb({type:Mt,selectors:[["mail-list"]],decls:3,vars:4,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlexFill","",4,"ngIf"],[1,"mail-list"],["matRipple","",3,"mail","ngClass","click",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutAlign","center center","fxFlexFill",""],[1,"no-messages-text","hint-text"],["matRipple","",3,"mail","ngClass","click"]],template:function(t,e){1&t&&(b.Yc(0,mt,4,3,"div",0),b.cc(1,"div",1),b.Yc(2,pt,1,8,"mail-list-item",2),b.bc()),2&t&&(b.zc("ngIf",0===e.mails.length),b.Hb(1),b.zc("@animateStagger",b.Cc(3,Ct)),b.Hb(1),b.zc("ngForOf",e.mails))},directives:[R.u,R.t,A.e,A.d,A.f,bt,j.r,R.r,T.a],pipes:[o.c],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;flex:1;padding:0;border-right:1px solid rgba(0,0,0,.12);overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]   .no-messages-text[_ngcontent-%COMP%]{font-size:24px;font-weight:300}[_nghost-%COMP%]   .mail-list[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;flex:1}"],data:{animation:w.a}}),Mt),vt=function(){return{delay:"300ms",scale:"0.2"}},xt=function(t){return{value:"*",params:t}},Ot=function(){return{delay:"400ms"}};function Pt(t,e){1&t&&(b.cc(0,"div",2),b.cc(1,"mat-icon",3),b.ad(2," email "),b.bc(),b.cc(3,"span",4),b.cc(4,"span"),b.ad(5),b.tc(6,"translate"),b.bc(),b.bc(),b.bc()),2&t&&(b.Hb(1),b.zc("@animate",b.Dc(6,xt,b.Cc(5,vt))),b.Hb(2),b.zc("@animate",b.Dc(9,xt,b.Cc(8,Ot))),b.Hb(2),b.bd(b.uc(6,3,"MAIL.SELECT_A_MESSAGE_TO_READ")))}var yt=function(t){return{"background-color":t}};function wt(t,e){if(1&t&&(b.cc(0,"div",34),b.Xb(1,"div",35),b.tc(2,"getById"),b.cc(3,"div",36),b.ad(4),b.tc(5,"getById"),b.bc(),b.bc()),2&t){var n=e.$implicit,c=b.sc(2);b.Hb(1),b.zc("ngStyle",b.Dc(10,yt,b.wc(2,2,c.labels,n,"color"))),b.Hb(3),b.bd(b.wc(5,6,c.labels,n,"title"))}}function St(t,e){1&t&&(b.cc(0,"mat-icon",37),b.ad(1,"star"),b.bc())}function kt(t,e){1&t&&(b.cc(0,"mat-icon",38),b.ad(1,"star_outline"),b.bc())}function Lt(t,e){1&t&&(b.cc(0,"mat-icon",39),b.ad(1,"label"),b.bc())}function At(t,e){1&t&&(b.cc(0,"mat-icon",38),b.ad(1,"label_outline"),b.bc())}function Ht(t,e){if(1&t&&b.Xb(0,"img",40),2&t){var n=b.sc(2);b.Ac("alt",n.mail.from.name),b.Ac("src",n.mail.from.avatar,b.Sc)}}function It(t,e){if(1&t&&(b.cc(0,"div",41),b.ad(1),b.bc()),2&t){var n=b.sc(2);b.Hb(1),b.cd(" ",n.mail.from.name[0]," ")}}function Ft(t,e){1&t&&(b.cc(0,"span"),b.ad(1,"Show Details"),b.bc())}function zt(t,e){1&t&&(b.cc(0,"span"),b.ad(1,"Hide Details"),b.bc())}function Et(t,e){if(1&t&&(b.cc(0,"div",42),b.cc(1,"div",43),b.cc(2,"span",44),b.ad(3,"From:"),b.bc(),b.cc(4,"span",44),b.ad(5,"To:"),b.bc(),b.cc(6,"span",44),b.ad(7,"Date:"),b.bc(),b.bc(),b.cc(8,"div",43),b.cc(9,"span",45),b.ad(10),b.bc(),b.cc(11,"span",45),b.ad(12),b.bc(),b.cc(13,"span",45),b.ad(14),b.bc(),b.bc(),b.bc()),2&t){var n=b.sc(2);b.Hb(10),b.bd(n.mail.from.email),b.Hb(2),b.bd(n.mail.to[0].email),b.Hb(2),b.bd(n.mail.time)}}function Tt(t,e){if(1&t&&(b.cc(0,"div",49),b.Xb(1,"img",50),b.cc(2,"div",43),b.cc(3,"a",51),b.ad(4,"View"),b.bc(),b.cc(5,"a",51),b.ad(6,"Download"),b.bc(),b.cc(7,"div",52),b.ad(8),b.bc(),b.bc(),b.bc()),2&t){var n=e.$implicit;b.Hb(1),b.Ac("src",n.preview,b.Sc),b.Hb(7),b.cd("(",n.size,")")}}function Dt(t,e){if(1&t&&(b.cc(0,"div",46),b.cc(1,"div",44),b.cc(2,"span"),b.ad(3,"Attachments"),b.bc(),b.ad(4),b.bc(),b.cc(5,"div",47),b.Yc(6,Tt,9,2,"div",48),b.bc(),b.bc()),2&t){var n=b.sc(2);b.Hb(4),b.cd(" (",n.mail.attachments.length,") "),b.Hb(2),b.zc("ngForOf",n.mail.attachments)}}function Rt(t,e){if(1&t){var n=b.dc();b.cc(0,"div"),b.cc(1,"div",5),b.cc(2,"div"),b.cc(3,"div",6),b.ad(4),b.bc(),b.cc(5,"div",7),b.Yc(6,wt,6,12,"div",8),b.bc(),b.bc(),b.cc(7,"div",9),b.cc(8,"button",10),b.oc("click",(function(t){return b.Qc(n),b.sc().toggleStar(t)})),b.Yc(9,St,2,0,"mat-icon",11),b.Yc(10,kt,2,0,"mat-icon",12),b.bc(),b.cc(11,"button",13),b.oc("click",(function(t){return b.Qc(n),b.sc().toggleImportant(t)})),b.Yc(12,Lt,2,0,"mat-icon",14),b.Yc(13,At,2,0,"mat-icon",12),b.bc(),b.bc(),b.bc(),b.cc(14,"div",15),b.cc(15,"div",16),b.cc(16,"div",17),b.cc(17,"div",18),b.cc(18,"div"),b.Yc(19,Ht,1,2,"img",19),b.Yc(20,It,2,1,"div",20),b.bc(),b.cc(21,"div",21),b.cc(22,"div",22),b.ad(23),b.bc(),b.cc(24,"div",23),b.cc(25,"div",24),b.ad(26,"to"),b.bc(),b.cc(27,"div"),b.ad(28),b.bc(),b.bc(),b.bc(),b.bc(),b.cc(29,"a",25),b.oc("click",(function(){b.Qc(n);var t=b.sc();return t.showDetails=!t.showDetails})),b.Yc(30,Ft,2,0,"span",1),b.Yc(31,zt,2,0,"span",1),b.bc(),b.Yc(32,Et,15,3,"div",26),b.bc(),b.cc(33,"button",27),b.oc("click",(function(t){return b.Qc(n),t.stopPropagation()})),b.cc(34,"mat-icon"),b.ad(35,"more_vert"),b.bc(),b.bc(),b.cc(36,"mat-menu",null,28),b.cc(38,"button",29),b.cc(39,"mat-icon"),b.ad(40,"reply"),b.bc(),b.cc(41,"span"),b.ad(42,"Reply"),b.bc(),b.bc(),b.cc(43,"button",30),b.cc(44,"mat-icon"),b.ad(45,"forward"),b.bc(),b.cc(46,"span"),b.ad(47,"Forward"),b.bc(),b.bc(),b.cc(48,"button",31),b.cc(49,"mat-icon"),b.ad(50,"print"),b.bc(),b.cc(51,"span"),b.ad(52,"Print"),b.bc(),b.bc(),b.bc(),b.bc(),b.Xb(53,"div",32),b.bc(),b.Yc(54,Dt,7,2,"div",33),b.bc()}if(2&t){var c=b.Mc(37),a=b.sc();b.Hb(4),b.bd(a.mail.subject),b.Hb(2),b.zc("ngForOf",a.mail.labels),b.Hb(3),b.zc("ngIf",a.mail.starred),b.Hb(1),b.zc("ngIf",!a.mail.starred),b.Hb(2),b.zc("ngIf",a.mail.important),b.Hb(1),b.zc("ngIf",!a.mail.important),b.Hb(6),b.zc("ngIf",a.mail.from.avatar),b.Hb(1),b.zc("ngIf",!a.mail.from.avatar),b.Hb(3),b.cd(" ",a.mail.from.name," "),b.Hb(5),b.bd(a.mail.to[0].name),b.Hb(2),b.zc("ngIf",!a.showDetails),b.Hb(1),b.zc("ngIf",a.showDetails),b.Hb(1),b.zc("ngIf",a.showDetails),b.Hb(1),b.zc("matMenuTriggerFor",c),b.Hb(20),b.zc("innerHTML",a.mail.message,b.Rc),b.Hb(1),b.zc("ngIf",a.mail.attachments)}}var jt,Yt=((jt=function(){function t(e){_classCallCheck(this,t),this._mailService=e,this.showDetails=!1,this._unsubscribeAll=new h.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._mailService.onCurrentMailChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.mail=e})),this._mailService.onLabelsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.labels=e}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleStar",value:function(t){t.stopPropagation(),this.mail.toggleStar(),this._mailService.updateMail(this.mail)}},{key:"toggleImportant",value:function(t){t.stopPropagation(),this.mail.toggleImportant(),this._mailService.updateMail(this.mail)}}]),t}()).\u0275fac=function(t){return new(t||jt)(b.Wb(g))},jt.\u0275cmp=b.Qb({type:jt,selectors:[["mail-details"]],decls:2,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center center","fxFlex","",4,"ngIf"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxFlex",""],[1,"s-128","mb-16","select-message-icon","hint-text"],[1,"select-message-text","hint-text"],["fxLayout","row","fxLayoutAlign","space-between center",1,"mail-header"],["flex","",1,"subject"],["fxLayout","row wrap",1,"labels"],["class","label","fxLayout","row","fxLayoutAlign","start center",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center",1,"actions"],["mat-icon-button","","aria-label","Toggle star",3,"click"],["class","amber-fg",4,"ngIf"],["class","secondary-text",4,"ngIf"],["mat-icon-button","","aria-label","Toggle important",3,"click"],["class","red-fg",4,"ngIf"],[1,"mail-content"],["fxLayout","row","fxLayoutAlign","space-between start",1,"info"],["fxFlex","","fxLayout","column","fxLayoutAlign","start start"],["fxLayout","row","fxLayoutAlign","start start"],["class","avatar",3,"alt","src",4,"ngIf"],["class","avatar","ms-random-class","vm.colors",4,"ngIf"],["fxLayout","column","fxLayoutAlign","start start"],[1,"name"],["fxLayout","row","fxLayoutAlign","start center",1,"to"],[1,"to-text"],[1,"toggle-details",3,"click"],["class","details","fxLayout","row","fxLayoutAlign","start start",4,"ngIf"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","aria-label","Reply"],["mat-menu-item","","aria-label","Forward"],["mat-menu-item","","aria-label","Print"],[3,"innerHTML"],["class","mail-attachments",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"label"],[1,"label-color",3,"ngStyle"],[1,"label-title"],[1,"amber-fg"],[1,"secondary-text"],[1,"red-fg"],[1,"avatar",3,"alt","src"],["ms-random-class","vm.colors",1,"avatar"],["fxLayout","row","fxLayoutAlign","start start",1,"details"],["fxLayout","column"],[1,"title"],[1,"detail"],[1,"mail-attachments"],["fxLayout","row wrap",1,"attachment-list"],["class","attachment","fxLayout","column",4,"ngFor","ngForOf"],["fxLayout","column",1,"attachment"],[1,"preview",3,"src"],["href","#","onclick","event.preventDefault()"],[1,"size"]],template:function(t,e){1&t&&(b.Yc(0,Pt,7,11,"div",0),b.Yc(1,Rt,55,16,"div",1)),2&t&&(b.zc("ngIf",!e.mail),b.Hb(1),b.zc("ngIf",e.mail))},directives:[R.u,A.e,A.d,A.b,I.a,R.t,H.b,et.c,et.d,et.a,R.x,T.c],pipes:[o.c,ct.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;padding:24px;overflow-y:auto;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]   .select-message-text[_ngcontent-%COMP%]{font-size:24px;font-weight:300}[_nghost-%COMP%]   .mail-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .mail-header[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{min-width:88px}[_nghost-%COMP%]   .mail-header[_ngcontent-%COMP%]   .subject[_ngcontent-%COMP%]{font-size:17px;font-weight:500}[_nghost-%COMP%]   .mail-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:11px;border-radius:2px;margin:4px 4px 4px 0;padding:3px 8px;background-color:rgba(0,0,0,.08)}[_nghost-%COMP%]   .mail-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   .label-color[_ngcontent-%COMP%]{width:8px;height:8px;margin-right:8px;border-radius:50%}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]{padding:24px 0}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .to[_ngcontent-%COMP%]   .to-text[_ngcontent-%COMP%]{margin-right:4px;text-transform:lowercase}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-bottom:16px}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{margin-right:16px;background-color:#039be5}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:8px;font-weight:500}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .toggle-details[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-decoration:underline;padding-top:16px;cursor:pointer;font-weight:500}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-top:8px}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:500;margin-right:6px}[_nghost-%COMP%]   .mail-content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{color:rgba(0,0,0,.54)}[_nghost-%COMP%]   .mail-attachments[_ngcontent-%COMP%]{padding:24px 0;border-top:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .mail-attachments[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:16px;font-weight:500}[_nghost-%COMP%]   .mail-attachments[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:100px;margin:0 16px 8px 0}[_nghost-%COMP%]   .mail-attachments[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{margin-bottom:2px}[_nghost-%COMP%]   .mail-attachments[_ngcontent-%COMP%]   .attachment[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:11px}"],data:{animation:w.a}}),jt);function Nt(t,e){1&t&&b.Xb(0,"div",25)}function Bt(t,e){if(1&t){var n=b.dc();b.cc(0,"button",26),b.oc("click",(function(){return b.Qc(n),b.sc().setFolderOnSelectedMails(4)})),b.cc(1,"mat-icon",27),b.ad(2,"delete"),b.bc(),b.bc()}}function Xt(t,e){if(1&t&&(b.cc(0,"button",13),b.cc(1,"mat-icon",27),b.ad(2,"folder"),b.bc(),b.bc()),2&t){b.sc();var n=b.Mc(44);b.zc("matMenuTriggerFor",n)}}function Wt(t,e){if(1&t){var n=b.dc();b.cc(0,"button",15),b.oc("click",(function(){b.Qc(n);var t=e.$implicit;return b.sc().setFolderOnSelectedMails(t.id)})),b.ad(1),b.bc()}if(2&t){var c=e.$implicit;b.Hb(1),b.cd("",c.title," ")}}function Qt(t,e){if(1&t&&(b.cc(0,"button",13),b.cc(1,"mat-icon",27),b.ad(2,"label"),b.bc(),b.bc()),2&t){b.sc();var n=b.Mc(48);b.zc("matMenuTriggerFor",n)}}function $t(t,e){if(1&t){var n=b.dc();b.cc(0,"button",15),b.oc("click",(function(){b.Qc(n);var t=e.$implicit;return b.sc().toggleLabelOnSelectedMails(t.id)})),b.ad(1),b.bc()}if(2&t){var c=e.$implicit;b.Hb(1),b.cd("",c.title," ")}}function Gt(t,e){if(1&t){var n=b.dc();b.cc(0,"div",28),b.cc(1,"button",26),b.oc("click",(function(){return b.Qc(n),b.sc().deselectCurrentMail()})),b.cc(2,"mat-icon",27),b.ad(3,"arrow_back"),b.bc(),b.bc(),b.bc()}}var Kt,Ut=function(t){return{"current-mail-selected":t}},Vt=((Kt=function(){function t(e,n,c){_classCallCheck(this,t),this._mailService=e,this.persoInfoSidebarService=n,this.persoInfoTranslationLoaderService=c,this.persoInfoTranslationLoaderService.loadTranslations(_,v),this.searchInput=new f.d(""),this._unsubscribeAll=new h.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this._mailService.onSelectedMailsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){setTimeout((function(){t.hasSelectedMails=e.length>0,t.isIndeterminate=e.length!==t._mailService.mails.length&&e.length>0}),0)})),this._mailService.onFoldersChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.folders=t._mailService.folders})),this._mailService.onFiltersChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.filters=t._mailService.filters})),this._mailService.onLabelsChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.labels=t._mailService.labels})),this._mailService.onCurrentMailChanged.pipe(Object(p.a)(this._unsubscribeAll)).subscribe((function(e){t.currentMail=e||null})),this.searchInput.valueChanges.pipe(Object(p.a)(this._unsubscribeAll),Object(M.a)(300),Object(C.a)()).subscribe((function(e){t._mailService.onSearchTextChanged.next(e)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}},{key:"toggleSelectAll",value:function(){this._mailService.toggleSelectAll()}},{key:"selectMails",value:function(t,e){this._mailService.selectMails(t,e)}},{key:"deselectMails",value:function(){this._mailService.deselectMails()}},{key:"deselectCurrentMail",value:function(){this._mailService.onCurrentMailChanged.next(null)}},{key:"toggleLabelOnSelectedMails",value:function(t){this._mailService.toggleLabelOnSelectedMails(t)}},{key:"setFolderOnSelectedMails",value:function(t){this._mailService.setFolderOnSelectedMails(t)}},{key:"toggleSidebar",value:function(t){this.persoInfoSidebarService.getSidebar(t).toggleOpen()}}]),t}()).\u0275fac=function(t){return new(t||Kt)(b.Wb(g),b.Wb(x.a),b.Wb(O.a))},Kt.\u0275cmp=b.Qb({type:Kt,selectors:[["mail"]],decls:54,vars:17,consts:[["id","mail",1,"page-layout","carded","left-sidebar","inner-scroll"],[1,"top-bg","mat-accent-bg"],["name","mail-main-sidebar","position","left","lockedOpen","gt-md",1,"sidebar"],[1,"center"],["fxLayout","row","fxLayoutAlign","start center",1,"header"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search-wrapper"],["mat-icon-button","","fxHide.gt-md","",1,"sidebar-toggle",3,"click"],["flex","","fxLayout","row","fxLayoutAlign","start center",1,"search","mat-white-bg"],["fxFlex","",3,"formControl","placeholder"],[1,"content-card","mat-white-bg",3,"ngClass"],[1,"toolbar","px-24","py-8"],["fxFlex","row","fxLayoutAlign","start center",1,"mail-selection"],[3,"checked","indeterminate","click"],["mat-icon-button","",3,"matMenuTriggerFor"],["selectMenu","matMenu"],["mat-menu-item","",3,"click"],["class","toolbar-separator",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],["folderMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["labelMenu","matMenu"],["fxHide.gt-xs","",4,"ngIf"],["fxLayout","row",1,"content"],["persoInfoPerfectScrollbar","","fxFlex",""],[1,"toolbar-separator"],["mat-icon-button","",3,"click"],[1,"secondary-text"],["fxHide.gt-xs",""]],template:function(t,e){if(1&t&&(b.cc(0,"div",0),b.Xb(1,"div",1),b.cc(2,"persoinfo-sidebar",2),b.Xb(3,"mail-main-sidebar"),b.bc(),b.cc(4,"div",3),b.cc(5,"div",4),b.cc(6,"div",5),b.cc(7,"button",6),b.oc("click",(function(){return e.toggleSidebar("mail-main-sidebar")})),b.cc(8,"mat-icon"),b.ad(9,"menu"),b.bc(),b.bc(),b.cc(10,"div",7),b.cc(11,"mat-icon"),b.ad(12,"search"),b.bc(),b.Xb(13,"input",8),b.tc(14,"translate"),b.bc(),b.bc(),b.bc(),b.cc(15,"div",9),b.cc(16,"div",10),b.cc(17,"div",11),b.cc(18,"mat-checkbox",12),b.oc("click",(function(){return e.toggleSelectAll()})),b.bc(),b.cc(19,"button",13),b.cc(20,"mat-icon"),b.ad(21,"arrow_drop_down"),b.bc(),b.bc(),b.cc(22,"mat-menu",null,14),b.cc(24,"button",15),b.oc("click",(function(){return e.selectMails()})),b.ad(25,"All"),b.bc(),b.cc(26,"button",15),b.oc("click",(function(){return e.deselectMails()})),b.ad(27,"None"),b.bc(),b.cc(28,"button",15),b.oc("click",(function(){return e.selectMails("read",!0)})),b.ad(29,"Read"),b.bc(),b.cc(30,"button",15),b.oc("click",(function(){return e.selectMails("read",!1)})),b.ad(31,"Unread"),b.bc(),b.cc(32,"button",15),b.oc("click",(function(){return e.selectMails("starred",!0)})),b.ad(33,"Starred"),b.bc(),b.cc(34,"button",15),b.oc("click",(function(){return e.selectMails("starred",!1)})),b.ad(35,"Unstarred"),b.bc(),b.cc(36,"button",15),b.oc("click",(function(){return e.selectMails("important",!0)})),b.ad(37,"Important"),b.bc(),b.cc(38,"button",15),b.oc("click",(function(){return e.selectMails("important",!1)})),b.ad(39,"Unimportant"),b.bc(),b.bc(),b.Yc(40,Nt,1,0,"div",16),b.Yc(41,Bt,3,0,"button",17),b.Yc(42,Xt,3,1,"button",18),b.cc(43,"mat-menu",null,19),b.Yc(45,Wt,2,1,"button",20),b.bc(),b.Yc(46,Qt,3,1,"button",18),b.cc(47,"mat-menu",null,21),b.Yc(49,$t,2,1,"button",20),b.bc(),b.bc(),b.Yc(50,Gt,4,0,"div",22),b.bc(),b.cc(51,"div",23),b.Xb(52,"mail-list",24),b.Xb(53,"mail-details",24),b.bc(),b.bc(),b.bc(),b.bc()),2&t){var n=b.Mc(23);b.Hb(13),b.zc("formControl",e.searchInput)("placeholder",b.uc(14,13,"MAIL.SEARCH_PLACEHOLDER")),b.Hb(2),b.zc("ngClass",b.Dc(15,Ut,e.currentMail)),b.Hb(3),b.zc("checked",e.hasSelectedMails)("indeterminate",e.isIndeterminate),b.Hb(1),b.zc("matMenuTriggerFor",n),b.Hb(21),b.zc("ngIf",e.hasSelectedMails),b.Hb(1),b.zc("ngIf",e.hasSelectedMails),b.Hb(1),b.zc("ngIf",e.hasSelectedMails),b.Hb(3),b.zc("ngForOf",e.folders),b.Hb(1),b.zc("ngIf",e.hasSelectedMails),b.Hb(3),b.zc("ngForOf",e.labels),b.Hb(1),b.zc("ngIf",e.currentMail)}},directives:[P.a,y.a,Z,A.e,A.d,A.b,H.b,T.b,I.a,f.b,f.o,f.e,R.r,T.a,tt.a,et.c,et.d,et.a,R.u,R.t,_t,F.a,Yt],pipes:[o.c],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]{margin:0;width:56px;height:56px;background:#fff;border-radius:0;border-right:1px solid rgba(0,0,0,.12)}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;height:56px;line-height:56px;padding:18px}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:56px;padding-left:16px;color:rgba(0,0,0,.54);border:none;outline:none}@media screen and (max-width:599px){[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mail-list[_ngcontent-%COMP%]{border-right:none}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mail-details[_ngcontent-%COMP%], [_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mail-list[_ngcontent-%COMP%]{flex:1 0 100%}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card[_ngcontent-%COMP%]   mail-details[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-mail-selected[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{padding-left:16px!important}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-mail-selected[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   mail-list[_ngcontent-%COMP%], [_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-mail-selected[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .mail-selection[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .center[_ngcontent-%COMP%]   .content-card.current-mail-selected[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   mail-details[_ngcontent-%COMP%]{display:flex!important}}"]}),Kt),qt=n("d3UM");n.d(e,"MailModule",(function(){return te}));var Jt,Zt=[{path:"label/:labelHandle",component:Vt,resolve:{mail:g}},{path:"label/:labelHandle/:mailId",component:Vt,resolve:{mail:g}},{path:"filter/:filterHandle",component:Vt,resolve:{mail:g}},{path:"filter/:filterHandle/:mailId",component:Vt,resolve:{mail:g}},{path:":folderHandle",component:Vt,resolve:{mail:g}},{path:":folderHandle/:mailId",component:Vt,resolve:{mail:g}},{path:"**",redirectTo:"inbox"}],te=((Jt=function t(){_classCallCheck(this,t)}).\u0275mod=b.Ub({type:Jt}),Jt.\u0275inj=b.Tb({factory:function(t){return new(t||Jt)},providers:[g],imports:[[i.j.forChild(Zt),H.c,tt.b,S.e,z.d,I.b,E.c,et.b,j.s,qt.b,L.b,o.b,l.a,r.g]]}),Jt)}}]);